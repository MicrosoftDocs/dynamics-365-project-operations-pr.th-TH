---
title: ประสิทธิภาพของ API กำหนดการโครงการ
description: หัวข้อนี้ให้ข้อมูลเกี่ยวกับการปรับมาตรฐานประสิทธิภาพของ API กำหนดการโครงการและระบุแนวทางปฏิบัติเพื่อการใช้งานที่เหมาะสมที่สุด
author: ruhercul
ms.date: 11/03/2021
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 3c14d27c561a86cd359cbdcbb448ae764dd3d90e
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/14/2022
ms.locfileid: "8593865"
---
# <a name="project-schedule-api-performance"></a>ประสิทธิภาพของ API กำหนดการโครงการ

_**นำไปใช้กับ:** Project Operations สำหรับสถานการณ์ตามทรัพยากร/ที่ไม่เก็บในคลัง การปรับใช้งานแบบ Lite - จัดการกับการออกใบแจ้งหนี้ชั่วคราว, Project for the Web_

หัวข้อนี้ให้ข้อมูลเกี่ยวกับการปรับมาตรฐานประสิทธิภาพของ Application Programming Interface (API) กำหนดการโครงการและระบุแนวทางปฏิบัติเพื่อการใช้งานที่เหมาะสมที่สุด

## <a name="project-scheduling-service"></a>บริการจัดกำหนดการโครงการ
บริการจัดกำหนดการโครงการเป็นบริการแบบหลายผู้เช่าที่ทำงานใน Microsoft Azure ออกแบบมาเพื่อปรับปรุงการโต้ตอบโดยการมอบประสบการณ์ที่รวดเร็วและราบรื่นเมื่อผู้ใช้ทำงานในโครงการต่างๆ การปรับปรุงนี้เกิดขึ้นจากการยอมรับคำขอการเปลี่ยนแปลง ดำเนินการกับคำขอ แล้วส่งคืนผลลัพธ์ทันที บริการยังคงทำงานกับ Dataverse ในแบบอะซิงโครนัสและไม่บล็อกผู้ใช้จากการดำเนินการอื่นๆ

API กำหนดการโครงการใช้บริการจัดกำหนดการโครงการเพื่อเรียกใช้คำขอที่จะอธิบายรายละเอียดเพิ่มเติมในส่วนต่อไปของหัวข้อนี้

API กำหนดการโครงการออกแบบมาเพื่อทำงานกับเอนทิตีโครงสร้างการแบ่งงาน (WBS) ต่อไปนี้

  - Project
  - งานโครงการ
  - การขึ้นต่อกันของงานโครงการ
  - สมาชิกของทีมโครงการ
  - การกำหนดทรัพยากร
  
รองรับทั้งฟิลด์แบบสำเร็จรูปและฟิลด์ที่กำหนดเอง เว้นแต่จะระบุไว้เป็นอย่างอื่น มีการรองรับการดำเนินการทั่วไปทั้งหมด เช่น สร้าง ปรับปรุง และลบ ดูข้อมูลเพิ่มเติมได้ที่ [ใช้ API กำหนดการโครงการเพื่อดำเนินงานและเอนทิตีการจัดกำหนดการ](schedule-api-preview.md)

มีการเพิ่มรูปแบบหน่วยของงานเป็นส่วนหนึ่งของ API กำหนดการโครงการ รูปแบบนี้เรียกว่า OperationSet และสามารถใช้ได้เมื่อคำขอหลายรายการต้องได้รับการประมวลผลในธุรกรรมเดียว

ภาพประกอบต่อไปนี้แสดงขั้นตอนที่คู่ค้าจะพบเมื่อใช้คุณลักษณะนี้

![Dataverse และขั้นตอนบริการจัดกำหนดการโครงการ](./media/dataverse-project-scheduling-service-flow.png)

**ขั้นตอนที่ 1**: ลูกค้าเรียก API ไปยังตำแหน่งข้อมูล Open Data Protocol (OData) ใน Dataverse เพื่อสร้าง OperationSet

**ขั้นตอนที่ 2**: หลังจากสร้าง OperationSet ใหม่แล้ว ระบบจะส่งคืนค่า **OperationSetId**

**ขั้นตอนที่ 3**: ไคลเอ็นต์ใช้ค่า **OperationSetId** เพื่อสร้างคำขอ API กำหนดการโครงการอื่น ผลลัพธ์ที่ได้คือคำขอสร้าง ปรับปรุง หรือลบในเอนทิตีการจัดกำหนดการ เมื่อทำการร้องขอนี้ จะมีการตรวจสอบเมตาดาต้าจนเสร็จสิ้น หากการตรวจสอบล้มเหลว คำขอจะถูกยกเลิก และมีการส่งกลับข้อผิดพลาด

**ขั้นตอนที่ 4a–4c**: ขั้นตอนเหล่านี้หมายถึงระยะ ACCEPT (ยอมรับ) ไคลเอ็นต์เรียก **ExecuteOperationSetV1** API ซึ่งส่งการเปลี่ยนแปลงทั้งหมดไปยังบริการจัดกำหนดการโครงการในชุดงานเดียว บริการจัดกำหนดการโครงการเรียกใช้การตรวจสอบของตนเองตามคำขอในชุดงาน ความล้มเหลวในการตรวจสอบใดๆ จะยกเลิกชุดงานและส่งคืนข้อยกเว้นให้กับผู้เรียก ถ้าชุดงานได้รับการยอมรับโดยบริการจัดกำหนดการโครงการเรียบร้อยแล้ว สถานะ OperationSet จะได้รับการปรับปรุงเพื่อแสดงข้อมูลที่ว่า OperationSet กำลังมีการประมวลผลโดยบริการจัดกำหนดการโครงการ

**ขั้นตอนที่ 5**: ขั้นตอนนี้หมายถึงระยะ PERSIST (คงอยู่) บริการจัดกำหนดการโครงการเขียนชุดงานในแบบอะซิงโครนัสไปยัง Dataverse ในหนึ่งธุรกรรม หากการดำเนินการเขียนสำเร็จ OperationSet ได้รับการกำหนดเป็น **เสร็จสมบูรณ์** ข้อผิดพลาดใดๆ จะทำให้มีการย้อนกลับธุรกรรมและชุดงาน และ OperationSet ได้รับการกำหนดเป็น **ล้มเหลว**

## <a name="performance-methodology"></a>วิธีการดำเนินงาน
เวลาดำเนินการกำหนดเป็นเวลาจากการเรียกไปยัง **ExecuteOperationSetV1** API จนกระทั่งบริการจัดกำหนดการโครงการเขียนไปยัง Dataverse เสร็จสิ้น การดำเนินการทั้งหมดทำงานรวมกัน 2,200 ครั้ง และมีการรายงานการวัดเวลาดำเนินการ P99 มีการวัดการทำงานแบบเรกคอร์ดเดียวและแบบกลุ่ม

สำหรับการดำเนินการแบบเรกคอร์ดเดียว OperationSet จะมีคำขอหนึ่งรายการ สำหรับการดำเนินการแบบกลุ่ม จะมีคำขอ 20, 50 หรือ 100 รายการ แบบกลุ่มแต่ละขนาดจะมีการรายงานแยกกัน

การดำเนินการเหล่านี้ทำงานในการปรับใช้งานแบบ Lite ของ UR 15 Project Operations ในอเมริกาเหนือ

## <a name="results"></a>ผลลัพธ์
### <a name="create-operations"></a>การดำเนินการสร้าง
#### <a name="single-record-create-operations"></a>การดำเนินการสร้างเรกคอร์ดเดียว
ตารางต่อไปนี้แสดงเวลาดำเนินการสำหรับการสร้างเรกคอร์ดเดียว เวลาเป็นวินาที

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">ชนิด&nbsp;&nbsp;&nbsp;ของเรกคอร์ด</th>
    <th class="tg-0lax" colspan="2">เวลา</th>
  </tr>
  <tr>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">2.5</td>
    <td class="tg-0lax">3.78</td>
  </tr>
  <tr>
    <td class="tg-0lax">งาน</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">การกำหนด</td>
    <td class="tg-0lax">9.19</td>
    <td class="tg-0lax">9.19</td>
  </tr>
  <tr>
    <td class="tg-0lax">สมาชิกของกลุ่มคน</td>
    <td class="tg-0lax">0.84</td>
    <td class="tg-0lax">4.2</td>
  </tr>
  <tr>
    <td class="tg-0lax">การขึ้นต่อกัน</td>
    <td class="tg-0lax">8.84</td>
    <td class="tg-0lax">8.84</td>
  </tr>
</tbody>
</table>

#### <a name="bulk-create-operations"></a>การดำเนินการสร้างแบบกลุ่ม
ตารางต่อไปนี้แสดงเวลาดำเนินการสำหรับการสร้างหลายเรกคอร์ด โดยเฉพาะอย่างยิ่ง Microsoft จวัดเวลาดำเนินการสำหรับการสร้าง 20, 50 และ 100 เรกคอร์ดใน OperationSet เดียว เวลาเป็นวินาที

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">ชนิด&nbsp;&nbsp;&nbsp;ของเรกคอร์ด</th>
    <th class="tg-0lax" colspan="6">เวลา</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 เรกคอร์ด.</th>
    <th class="tg-0lax" colspan="2">50 เรกคอร์ด.</th>
    <th class="tg-0lax" colspan="2">100 เรกคอร์ด.</th>
  </tr>
  <tr>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">งาน</td>
    <td class="tg-0lax">19.92</td>
    <td class="tg-0lax">38.35</td>
    <td class="tg-0lax">36.67</td>
    <td class="tg-0lax">99.13</td>
    <td class="tg-0lax">116.77</td>
    <td class="tg-0lax">174.06</td>
  </tr>
  <tr>
    <td class="tg-0lax">การกำหนด</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">69.38</td>
    <td class="tg-0lax">69.38</td>
  </tr>
  <tr>
    <td class="tg-0lax">การขึ้นต่อกัน</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">176.89</td>
    <td class="tg-0lax">176.89</td>
  </tr>
</tbody>
</table>

> [!NOTE] 
> การดำเนินการสร้างแบบกลุ่มในเอนทิตี **โครงการ** และ **สมาชิกทีม** ไม่รวมอยู่ในตารางนี้ เนื่องจากรันไทม์สำหรับการดำเนินการเหล่านั้นคล้ายกับรันไทม์เมื่อมีการเรียก API สำหรับการสร้างเรกคอร์ดเดียวหลายครั้ง API เหล่านี้จะทำงานทันทีใน Dataverse

ภาพประกอบต่อไปนี้แสดงโครงร่างของเวลาดำเนินการสำหรับเอนทิตี **งาน**, **การกำหนด** และ **การขึ้นต่อกัน** เมื่อมีการสร้าง 20, 50 และ 100 เรกคอร์ดและใช้ฟิลด์ที่รองรับทั้งหมด

![กราฟเวลาดำเนินการสร้างเรกคอร์ด](./media/create-record-execution-time.png)

### <a name="update-operations"></a>การดำเนินการปรับปรุง
#### <a name="single-record-update-operations"></a>การดำเนินการปรับปรุงเรกคอร์ดเดียว
ตารางต่อไปนี้แสดงเวลาดำเนินการสำหรับการปรับปรุงเรกคอร์ดเดียว เวลาเป็นวินาที

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">ชนิด&nbsp;&nbsp;&nbsp;ของเรกคอร์ด</th>
    <th class="tg-0lax" colspan="2">เวลา</th>
  </tr>
  <tr>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น </th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">9.53</td>
    <td class="tg-0lax">13.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">งาน</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">สมาชิกของกลุ่มคน</td>
    <td class="tg-0lax">9</td>
    <td class="tg-0lax">8.96</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> ไม่รองรับการดำเนินการปรับปรุงในเอนทิตี **การกำหนดทรัพยากร** และ **การขึ้นต่อกันของงานโครงการ**

#### <a name="bulk-update-operations"></a>การดำเนินการปรับปรุงแบบกลุ่ม
ตารางต่อไปนี้แสดงเวลาดำเนินการสำหรับการปรับปรุงหลายเรกคอร์ด โดยเฉพาะอย่างยิ่ง Microsoft จวัดเวลาดำเนินการสำหรับการปรับปรุง 20, 50 และ 100 เรกคอร์ดใน OperationSet เดียว เวลาเป็นวินาที

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">ชนิด&nbsp;&nbsp;&nbsp;ของเรกคอร์ด</th>
    <th class="tg-0lax" colspan="6">เวลา</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 เรกคอร์ด.</th>
    <th class="tg-0lax" colspan="2">50 เรกคอร์ด.</th>
    <th class="tg-0lax" colspan="2">100 เรกคอร์ด.</th>
  </tr>
  <tr>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
    <th class="tg-0lax">ฟิลด์ที่จำเป็น</th>
    <th class="tg-0lax">ฟิลด์ที่รองรับทั้งหมด</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">งาน</td>
    <td class="tg-0lax">8.91</td>
    <td class="tg-0lax">38.71</td>
    <td class="tg-0lax">20.92</td>
    <td class="tg-0lax">87.13</td>
    <td class="tg-0lax">36.68</td>
    <td class="tg-0lax">190.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">สมาชิกของกลุ่มคน</td>
    <td class="tg-0lax">20.52</td>
    <td class="tg-0lax">26.06</td>
    <td class="tg-0lax">41.93</td>
    <td class="tg-0lax">44.51</td>
    <td class="tg-0lax">38.63</td>
    <td class="tg-0lax">66.53</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> ไม่รองรับการดำเนินการปรับปรุงในเอนทิตี **การกำหนดทรัพยากร** และ **การขึ้นต่อกันของงานโครงการ**

ภาพประกอบต่อไปนี้แสดงโครงร่างของเวลาดำเนินการสำหรับเอนทิตี งานและสมาชิกทีมเมื่อมีการปรับปรุง 20, 50 และ 100 เรกคอร์ดและใช้ฟิลด์ที่รองรับทั้งหมด

![กราฟเวลาดำเนินการปรับปรุงเรกคอร์ด](./media/update-record-execution-time.png)

### <a name="delete-operations"></a>การดำเนินการลบ
#### <a name="single-record-delete-operations"></a>การดำเนินการลบเรกคอร์ดเดียว
ตารางต่อไปนี้แสดงเวลาดำเนินการสำหรับการลบเรกคอร์ดเดียว เวลาเป็นวินาที

| ชนิดของเรกคอร์ด | เวลา  |
|-------------|-------|
| งาน        | 20.12 |
| การกำหนด  | 10.86 |
| สมาชิกของกลุ่มคน | 12.52 |
| การขึ้นต่อกัน  | 20.89 |

> [!NOTE]
> ไม่รองรับการดำเนินการลบในเอนทิตี **โครงการ**

#### <a name="bulk-delete-operations"></a>การดำเนินการลบแบบกลุ่ม
ตารางต่อไปนี้แสดงเวลาดำเนินการสำหรับการลบหลายเรกคอร์ด โดยเฉพาะอย่างยิ่ง Microsoft จวัดเวลาดำเนินการสำหรับการลบ 20, 50 และ 100 เรกคอร์ดใน OperationSet เดียว เวลาเป็นวินาที

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">ชนิด&nbsp;&nbsp;&nbsp;ของเรกคอร์ด</th>
    <th class="tg-0lax" colspan="3">เวลา</th>
  </tr>
  <tr>
    <th class="tg-0lax">20 เรกคอร์ด.</th>
    <th class="tg-0lax">50 เรกคอร์ด.</th>
    <th class="tg-0lax">100 เรกคอร์ด.</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">งาน</td>
    <td class="tg-0lax">20.91</td>
    <td class="tg-0lax">67.43</td>
    <td class="tg-0lax">71.96</td>
  </tr>
  <tr>
    <td class="tg-0lax">การกำหนด</td>
    <td class="tg-0lax">11.75</td>
    <td class="tg-0lax">25.79</td>
    <td class="tg-0lax">47.66</td>
  </tr>
  <tr>
    <td class="tg-0lax">สมาชิกของกลุ่มคน</td>
    <td class="tg-0lax">9.78</td>
    <td class="tg-0lax">39.73</td>
    <td class="tg-0lax">24.33</td>
  </tr>
  <tr>
    <td class="tg-0lax">การขึ้นต่อกัน</td>
    <td class="tg-0lax">24.61</td>
    <td class="tg-0lax">54.9</td>
    <td class="tg-0lax">109.16</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> ไม่รองรับการดำเนินการลบในเอนทิตี **โครงการ**

ภาพประกอบต่อไปนี้แสดงโครงร่างของเวลาดำเนินการสำหรับเอนทิตี **งาน**, **การกำหนด**, **สมาชิกทีม** และ **การขึ้นต่อกัน** เมื่อมีการลบ 20, 50 และ 100 เรกคอร์ด

![กราฟเวลาดำเนินการลบเรกคอร์ด](./media/delete-record-execution-time.png)

## <a name="observations"></a>ข้อสังเกต
สำหรับการดำเนินการกับเรกคอร์ดแต่ละอย่าง **ExecuteOperationSet** API ใช้เวลาประมาณ 800 มิลลิวินาทีในการส่งคำขอไปยังบริการจัดกำหนดการโครงการ จากนั้น บริการจัดกำหนดการโครงการจะใช้เวลาประมาณห้าวินาทีในการประมวลผลส่วนข้อมูลและเรียก Dataverse เวลาดำเนินการที่เหลือจะใช้กับการเรียกใช้ตรรกะธุรกิจและเขียนข้อมูลไปยังฐานข้อมูลใน Dataverse

เมื่อมีการสร้าง ปรับปรุง หรือลบ 100 เรกคอร์ด **ExecuteOperationSet** API จะใช้เวลาประมาณสามวินาทีในการส่งคำขอไปยังบริการจัดกำหนดการโครงการ จากนั้น บริการจัดกำหนดการโครงการจะใช้เวลาประมาณห้าวินาทีในการประมวลผลคำขอและเรียก Dataverse การดำเนินการแบบกลุ่มต้องจ่าย **ภาษีบริการจัดกำหนดการโครงการ** ครั้งเดียวสำหรับเรกคอร์ดทั้งหมดใน OperationSet ดังนั้น การดำเนินการแบบกลุ่มจึงมีเวลาดำเนินการเฉลี่ยที่ต่ำกว่าการดำเนินการแบบเรกคอร์ดเดียวอย่างมาก

## <a name="scenarios"></a>สถานการณ์สมมติ
ตารางต่อไปนี้แสดงเวลาดำเนินการเมื่อใช้ API กำหนดการโครงการเพื่อทำให้สถานการณ์เฉพาะสำเร็จ เวลาเป็นวินาที

| สถานการณ์สมมติ                                                                   | เวลา  |
|----------------------------------------------------------------------------|-------|
| สร้างโครงการที่มี 40 งาน                                      | 36.01 |
| สร้างโครงการที่มี 40 งานและการขึ้นต่อกัน 20 รายการ                  | 38.11 |
| สร้างโครงการที่มี 40 งานและการกำหนด 30 รายการ                   | 60.17 |
| สร้างโครงการที่มี 40 งาน การขึ้นต่อกัน 20 รายการ และการกำหนด 30 รายการ | 60.27 |

## <a name="best-practices"></a>แนวทางปฏิบัติ
จากผลลัพธ์ของสถานการณ์ก่อนหน้า API ทำงานได้ดีขึ้นในเงื่อนไขต่อไปนี้

  - จัดกลุ่มการดำเนินงานร่วมกันให้ได้มากที่สุด รันไทม์เฉลี่ยสำหรับการดำเนินการแบบกลุ่มดีกว่ารันไทม์เฉลี่ยสำหรับการดำเนินการแบบเรกคอร์ดเดียว ยิ่งมีจำนวน OperationSets ใช้งานอยู่น้อยลง เวลาดำเนินการเฉลี่ยก็จะเร็วขึ้น
  - ตั้งค่าเฉพาะแอตทริบิวต์ขั้นต่ำที่จำเป็นในการทำให้สถานการณ์ของคุณสำเร็จ เลือกเกี่ยวกับชนิดของฟิลด์ที่ไม่จำเป็นซึ่งรวมอยู่ในคำขอ OperationSet ฟิลด์ที่มีคีย์นอกหรือฟิลด์ค่าสะสมจะส่งผลเสียต่อประสิทธิภาพการทำงาน
