---
title: เตรียมใช้งานสภาพแวดล้อมใหม่
description: หัวข้อนี้ให้ข้อมูลเกี่ยวกับวิธีการเตรียมใช้งานสภาพแวดล้อม Project Operations ของคุณ
author: sigitac
manager: Annbe
ms.date: 12/11/2020
ms.topic: article
ms.prod: ''
ms.service: project-operations
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: 09af2a7693c45d1d0b9c75420d018cc50d2cc0fa
ms.sourcegitcommit: 04c446746aad97fc3f4c3d441983c586b918a3a6
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/11/2020
ms.locfileid: "4727813"
---
# <a name="provision-a-new-environment"></a>เตรียมใช้งานสภาพแวดล้อมใหม่

_**นำไปใช้กับ:** Project Operations สำหรับสถานการณ์ตามทรัพยากร/วัสดุที่ไม่ได้เก็บในคลัง_

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

หัวข้อนี้ให้ข้อมูลเกี่ยวกับวิธีการเตรียมใช้งานสภาพแวดล้อม Dynamics 365 Project Operations ใหม่สำหรับสถานการณ์ทรัพยากร/วัสดุที่ไม่ได้เก็บในคลัง

## <a name="enable-project-operations-automated-provisioning-in-an-lcs-project"></a>เปิดใช้งานการเตรียมใช้งานอัตโนมัติของ Project Operations ในโครงการ LCS

ใช้ขั้นตอนต่อไปนี้เพื่อเปิดใช้งานขั้นตอนการเตรียมใช้งานอัตโนมัติของ Project Operations สำหรับโครงการ LCS ของคุณ

1. ไปที่ [LCS](https://lcs.dynamics.com/v2) และเลือกไทล์ **การจัดการคุณลักษณะพรีวิว**
2. ในรายการ **คุณลักษณะพรีวิว** เลือก **คุณลักษณะ Project Operations** และเลือก **เปิดใช้คุณลักษณะพรีวิวแล้ว** เพื่อเปิดใช้งาน Project Operations

> [!NOTE]
> ขั้นตอนนี้ดำเนินการเพียงครั้งเดียวต่อโครงการ LCS

## <a name="provision-a-project-operations-environment"></a>เตรียมใช้งานสภาพแวดล้อม Project Operations

1. เปิดการปรับใช้งาน Dynamics 365 Finance [สภาพแวดล้อมสาธิต](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/deployment/deploy-demo-environment) หรือ [sandbox/ สภาพแวดล้อมการทำงานจริง](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/deployment/deployenvironment-newinfrastructure) 
2. ดำเนินการตามวิซาร์ด **การเตรียมใช้งานสภาพแวดล้อม** 

> [!IMPORTANT]
> ตรวจสอบว่าเวอร์ชันของแอปพลิเคชันที่เลือกคือ 10.0.13 หรือสูงกว่า

3. เพื่อเตรียมใช้งาน Project Operations ภายใต้ **การตั้งค่าขั้นสูง** เลือก **Common Data Service** 
4. เปิดใช้งาน **การตั้งค่า Common Data Service** โดยการเลือก **ใช่** จากนั้นป้อนข้อมูลในฟิลด์ที่จำเป็น:

  - ชื่อ
  - ขอบเขต
  - ภาษา
  - สกุลเงิน
 
5. ในฟิลด์ **แม่แบบ Common Data Service** ให้เลือก **Project Operations** 

6. เลือกชนิดชนิดสภาพแวดล้อมสำหรับการปรับใช้งานของคุณ การทดลองใช้ตามการสมัครใช้งานจะช่วยให้คุณสามารถปรับใช้งานสภาพแวดล้อม CDS เป็นเวลา 30 วัน 

![การตั้งค่าการปรับใช้งาน](./media/1DeploymentSettings.png)

> [!IMPORTANT]
> เลือก **ตกลง** เพื่อรับทราบข้อกำหนดในการให้บริการ จากนั้นเลือก **เสร็จแล้ว** เพื่อกลับไปที่การตั้งค่าการปรับใช้งาน

![การยินยอมการปรับใช้งาน](./media/2DeploymentConsent.png)

7. ทางเลือก - ใช้ข้อมูลสาธิตกับสภาพแวดล้อม ไปที่ **การตั้งค่าขั้นสูง** เลือก **ปรับแต่งการตั้งค่าคอนฟิกฐานข้อมูล SQL** และตั้งค่า **ระบุชุดข้อมูลสำหรับฐานข้อมูลแอปพลิเคชัน** เป็น **การสาธิต**

8. กรอกข้อมูลในฟิลด์ที่จำเป็นที่เหลือในวิซาร์ดและยืนยันการปรับใช้งาน เวลาในการจัดเตรียมสภาพแวดล้อมจะแตกต่างกันไปตามชนิดสภาพแวดล้อม การเตรียมใช้งานอาจใช้เวลาถึงหกชั่วโมง

  หลังจากการปรับใช้งานเสร็จสมบูรณ์ สภาพแวดล้อมจะแสดงเป็น **ปรับใช้งานแล้ว**

9. เพื่อยืนยันว่าสภาพแวดล้อมได้ปรับใช้เรียบร้อยแล้ว ให้เลือก **เข้าสู่ระบบ** และเข้าสู่ระบบเพื่อยืนยัน

![ รายละเอียดสภาพแวดล้อม](./media/3EnvironmentDetails.png)

## <a name="apply-updates-to-the-finance-environment"></a>ใช้การปรับปรุงกับสภาพแวดล้อม Finance

Project Operations ต้องการสภาพแวดล้อม Finance ที่มีเวอร์ชันของแอปพลิเคชัน **10.0.13 (10.0.569.20009)** หรือสูงกว่า

คุณอาจต้องใช้การปรับปรุงคุณภาพกับสภาพแวดล้อม Finance ของคุณเพื่อรับเวอร์ชันนี้

1. ใน LCS บนเพจ **รายละเอียดสภาพแวดล้อม** ใน **การปรับปรุงที่มีอยู่** ให้เลือก **ดูการปรับปรุง**

![ดูการปรับปรุง](./media/5ViewUpdates.png)

2. บนเพจ **การปรับปรุงไบนารี** ให้เลือก **บันทึกแพคเกจ**

![บันทึกแพคเกจ](./media/6SavePackage.png)

3. คลิก **เลือกทั้งหมด** แล้วเลือก **บันทึกแพคเกจ**

![ตรวจทานและบันทึกการปรับปรุง](./media/7ReviewAndSaveUpdates.png)

4. ป้อนชื่อและคำอธิบายของแพคเกจ จากนั้นเลือก **บันทึก** กระบวนการนี้อาจใช้เวลาสักครู่ ทั้งนี้ขึ้นอยู่กับการเชื่อมต่ออินเทอร์เน็ต

![อัปโหลดแพคเกจไปยังแอสเซทไลบรารี](./media/8UploadPackageToAssetsLibrary.png)

5. หลังจากบันทึกแพคเกจแล้ว ให้เลือก **เสร็จแล้ว** และบันทึกแพคเกจนี้ลงในแอสเซทไลบรารีในโครงการ LCS ของคุณ

การบันทึกและตรวจสอบความถูกต้องของแพคเกจอาจใช้เวลาประมาณ 15 นาที

6. หากต้องการใช้การปรับปรุง ให้ไปที่เพจ **รายละเอียดสภาพแวดล้อม** ใน LCS และเลือก **รักษา** > **ใช้การปรับปรุง**

![รักษาสภาพแวดล้อม](./media/9MaintainEnvironment.png)

7. ในรายการปรับปรุง ให้เลือกแพคเกจที่คุณสร้าง และเลือก **นำไปใช้**

![ใช้การปรับปรุง](./media/10ApplyUpdates.png)

การดูแลสภาพแวดล้อมจะใช้เวลาพอสมควร หลังจากเสร็จสิ้น สภาพแวดล้อมจะคืนกลับสู่สถานะที่ปรับใช้งานได้

![ปรับใช้งานสภาพแวดล้อมแล้ว](./media/11EnvironmentDeployed.png)

## <a name="establish-a-dual-write-connection"></a>สร้างการเชื่อมต่อการรวมแบบสองทิศทาง 

1. ในโครงการ LCS ของคุณ ไปที่เพจ **รายละเอียดสภาพแวดล้อม**
2. ภายใต้ **ข้อมูลสภาพแวดล้อม Common Data Service** เลือก **ลิงก์ไปยัง CDS สำหรับแอป**
3. หลังจากลิงก์เสร็จสมบูรณ์ ให้เลือก **ลิงก์ไปยัง CDS สำหรับแอป** อีกครั้ง คุณจะได้รับการเปลี่ยนเส้นทางไปยังการรวมแบบสองทิศทางใน Finance

![เชื่อมโยงไปยัง CDS](./media/12LinktoCDS.png)

4. เลือก **ใช้โซลูชัน** เพื่อเข้าถึงเอนทิตีที่จะถูกแม็ปในการรวม

![ใช้โซลูชัน](./media/13ApplySolutions.png)

5. เลือกทั้งสองโซลูชัน **แผนที่เอนทิตีแบบสองทิศทางของ Dynamics 365 Finance and Operations** และ **แผนที่เอนทิตีแบบสองทิศทางของ Dynamics 365 Project Operations** แล้วเลือก **สมัคร**

![ยืนยันโซลูชัน](./media/14ConfirmSolutions.png)

หลังจากใช้โซลูชันแล้ว เอนทิตีการรวมแบบสองทิศทางจะมีการนำไปใช้กับสภาพแวดล้อม

![การใช้โซลูชัน](./media/15ApplyingSolutions.png)

หลังจากใช้เอนทิตีแล้ว การแม็ปที่มีอยู่ทั้งหมดจะแสดงรายการในสภาพแวดล้อม

![การแม็ปการรวมแบบสองทิศทาง](./media/15DWMappings.png)

## <a name="refresh-the-data-entities-after-the-update"></a>รีเฟรชเอนทิตีข้อมูลหลังการปรับปรุง

1. ใน Finance ไปที่พื้นที่ทำงาน **การจัดการข้อมูล**

![พื้นที่ทำงานการจัดการข้อมูล](./media/16DataManagement.png)

2. เลือกไทล์ **พารามิเตอร์กรอบงาน**

![พารามิเตอร์กรอบงาน](./media/17FrameworkParameters.png)

3. บนเพจ **การตั้งค่าเอนทิตี** ให้เลือก **รีเฟรชรายการเอนทิตี**

![รีเฟรชรายการเอนทิตี](./media/18RefreshEntityList.png)

การรีเฟรชจะใช้เวลาประมาณ 20 นาที คุณจะได้รับการแจ้งเตือนเมื่อเสร็จสมบูรณ์

![รีเฟรชการยืนยัน](./media/19RefreshConfirmation.png)

## <a name="update-security-settings-on-project-operations-on-dataverse"></a>อัปเดตการตั้งค่าความปลอดภัยใน Project Operations บน Dataverse

1. ไปที่ Project Operations บนสภาพแวดล้อม Dataverse ของคุณ 
2. ไปที่ **การตั้งค่า** > **ความปลอดภัย** > **Security roles** 
3. บนหน้า **Security roles** ในรายการของบทบาท ให้เลือก **ผู้ใช้แอปการรวมแบบสองทิศทาง** และเลือกแท็บ **เอนทิตีที่กำหนดเอง**  
4. ตรวจสอบว่าบทบาทมีสิทธิ์ **อ่าน** และ **ผนวกกับ** สำหรับ:
      
      - **ชนิดอัตราแลกเปลี่ยนสกุลเงิน**
      - **ผังบัญชี**
      - **ปฏิทินทางบัญชี**
      - **บัญชีแยกประเภท**

5. หลังจากอัปเดต Security role แล้ว ให้ไปที่ **การตั้งค่า** > **ความปลอดภัย** > **กลุ่มคน** และเลือกกลุ่มคนเริ่มต้นในมุมมองของกลุ่มคน **เจ้าของธุรกิจในพื้นที่**
6. เลือก **จัดการบทบาท** และตรวจสอบว่าสิทธิ์ความปลอดภัย **ผู้ใช้แอปการรวมแบบสองทิศทาง** ถูกนำไปใช้กับกลุ่มคนนี้

## <a name="run-project-operations-dual-write-maps"></a>เรียกใช้การแม็ปการรวมแบบสองทิศทางของ Project Operations

1. ในโครงการ LCS ของคุณ ไปที่เพจ **รายละเอียดสภาพแวดล้อม**
2. ภายใต้ **ข้อมูลสภาพแวดล้อม Common Data Service** เลือก **ลิงก์ไปยัง CDS สำหรับแอป** หลังจากคุณเลือกลิงก์ คุณจะได้รับการเปลี่ยนเส้นทางไปยังรายการเอนทิตีในการแม็ป
3. เริ่มต้นการแม็ปตามที่อธิบายไว้ในตารางต่อไปนี้ ตรวจสอบให้แน่ใจว่าได้ทำตามลำดับที่ระบุไว้

| **เอนทิตีแมป** | **รีเฟรชเอนทิตี** | **การทำข้อมูลให้ตรงกันครั้งแรก** | **ข้อมูลหลักสำหรับการทำข้อมูลให้ตรงกันครั้งแรก** | **ข้อกำหนดเบื้องต้นการเรียกใช้** | **ข้อกำหนดเบื้องต้นสำหรับการซิงค์ครั้งแรก** |
| --- | --- | --- | --- | --- | --- |
| **บทบาททรัพยากรโครงการสำหรับทุกบริษัท (bookableresourcecategories)** | ไม่ | มี | Common Data Service | ไม่ | N\A |
| **นิติบุคคล (cdm\_companies)** | ไม่ | มี | แอป Finance and Operations | ไม่ | N\A |
| **บัญชีแยกประเภท (msdyn_ledgers)** | ไม่ | มี | แอป Finance and Operations | มี | ใช่ แอป Finance and Operations |
| **ข้อมูลจริงของการรวม Project Operations (msdyn\_actuals)** | ไม่ | No | N\A | มี | No |
| **รายละเอียดการให้บริการตามสัญญาตามโครงการ (salesorderdetails)** | No | No | N\A | No | No |
| **เอนทิตีการรวมสำหรับความสัมพันธ์ธุรกรรมโครงการ (msdyn\_transactionconnections)** | No | No | N\A | No | N\A |
| **หลักเป้าหมายในรายละเอียดการให้บริการตามสัญญาของการรวม Project Operations (msdyn\_contractlinesscheduleofvalues)** | No | No | N\A | No | N\A |
| **เอนทิตีการรวม Project Operations สำหรับการประมาณการค่าใช้จ่าย (msdyn\_estimateslines)** | No | No | N\A | No | N\A |
| **เอนทิตีการส่งออกชนิดค่าใช้จ่ายโครงการของการรวม Project Operations (msdyn\_expensecategories)** | No | No | N\A | No | N\A |
| **เอนทิตีการส่งออกค่าใช้จ่ายโครงการของการรวม Project Operations (msdyn\_expenses)** | มี | No | N\A | No | N\A |
| **เอนทิตีการรวม Project Operations สำหรับการประมาณการชั่วโมง (msdyn\_resourceassignments)** | มี | No | N\A | No | N\A |


4. หากต้องการรีเฟรชเอนทิตี เลือกชื่อการแม็ป จากนั้นเลือก **รีเฟรชเอนทิตี** 


![รีเฟรชการแม็ป](./media/20RefreshMapping.png)

5. หลังจากการรีเฟรชเสร็จสิ้น เรียกใช้การแม็ป ก่อนที่คุณจะเปิดใช้งานการแม็ปถัดไป ให้ตรวจสอบว่าการแม็ปในตารางอยู่ในสถานะ **กำลังทำงาน** การเรียกใช้การแม็ปที่มีข้อกำหนดเบื้องต้นจำนวนมากอาจใช้เวลาสักครู่

หากต้องการเรียกใช้การแม็ปที่มีข้อกำหนดเบื้องต้น ให้เปิดใช้งานการสลับ **แสดงการแม็ปเอนทิตีที่เกี่ยวข้อง** ถ้าตารางระบุ **ข้อกำหนดเบื้องต้นสำหรับการซิงค์ครั้งแรก** เป็น **ไม่** ตรวจสอบว่าค่าสถานะ **การซิงค์ครั้งแรก** เป็น **ปิด** ในการแม็ปข้อกำหนดเบื้องต้นทั้งหมดก่อนที่คุณจะเรียกใช้

![เรียกใช้การแม็ป](./media/21RunMap.png)

6. ตรวจสอบว่าการแม็ปที่เกี่ยวข้องกับโครงการทั้งหมดอยู่ในสถานะกำลังทำงาน

![การเรียกใช้การแม็ปทั้งหมด](./media/22AllMapsRunning.png)


## <a name="apply-configuration-data-in-cds-for-project-operations-optional"></a>ใช้ข้อมูลการตั้งค่าคอนฟิกใน CDS สำหรับ Project Operations (ไม่จำเป็น)

หากคุณใช้ข้อมูลสาธิตกับสภาพแวดล้อม Finance โปรดดูที่ [ตั้งค่าและใช้ข้อมูลการกำหนดค่าใน Common Data Service for Project Operations](resource-apply-pro-setup-config-data.md) เพื่อใช้ข้อมูลสาธิตกับสภาพแวดล้อม CDS


ขณะนี้ สภาพแวดล้อม Project Operations ของคุณได้รับการเตรียมใช้งานและกำหนดค่าแล้ว 
