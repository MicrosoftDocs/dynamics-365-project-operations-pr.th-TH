---
title: การขยายรายการเวลา
description: หัวข้อนี้ให้ข้อมูลเกี่ยวกับวิธีที่นักพัฒนาสามารถขยายการควบคุมรายการเวลา
author: stsporen
manager: Annbe
ms.date: 10/01/2020
ms.topic: article
ms.service: dynamics-365-customerservice
ms.reviewer: kfend
ms.author: stsporen
ms.openlocfilehash: 93f411ad7c86beefcc35e7799a03987dacdcd62b
ms.sourcegitcommit: 5a29adce48133e09f051929e8544d6c2c93c025d
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 10/02/2020
ms.locfileid: "3930903"
---
# <a name="extending-time-entries"></a>การขยายรายการเวลา

_**นำไปใช้กับ:** Project Operations สำหรับสถานการณ์ตามทรัพยากร/วัสดุที่ไม่ได้เก็บในคลัง การปรับใช้งานแบบ Lite - จัดการกับการออกใบแจ้งหนี้ชั่วคราว_

Dynamics 365 Project Operations มีการควบคุมแบบกำหนดเองของรายการเวลาที่ขยายได้ การควบคุมนี้มีคุณลักษณะดังต่อไปนี้:

- ป้อนเวลาในแนวนอนเป็นเวลาหนึ่งสัปดาห์
- ผลรวมตามวัน แถว หรือสัปดาห์
- คัดลอกแถวหรือสัปดาห์
- รายการเวลาเป็น HH:mm หรือ HH.hh (แปลงเป็น HH.hh โดยอัตโนมัติ)
- นำเข้าจากการมอบหมาย การจอง หรือการนัดหมาย

การขยายรายการเวลาสามารถทำได้ในสองพื้นที่:
- [เพิ่มรายการเวลาที่กำหนดเองสำหรับการใช้งานของคุณเอง](#add)
- [ปรับแต่งการควบคุมรายการเวลารายสัปดาห์](#customize)

## <a name="add-custom-time-entries-for-your-own-use"></a><a name="add"></a>เพิ่มรายการเวลาที่กำหนดเองสำหรับการใช้งานของคุณเอง

รายการเวลาเป็นเอนทิตีหลักที่ออกแบบมาเพื่อใช้สำหรับหลายสถานการณ์ ในเดือนเมษายน เวฟ 1 2020 ได้เริ่มใช้โซลูชันหลักของ TESA ซึ่งมีเอนทิตี **การตั้งค่า** และ Security role ใหม่ **ผู้ใช้รายการเวลา** ฟิลด์ใหม่ **msdyn_start** และ **msdyn_end** ซึ่งมีความสัมพันธ์โดยตรงกับ **msdyn_duration** มีการรวมไว้ด้วย เอนทิตีใหม่, Security role และฟิลด์ช่วยให้สามารถใช้วิธีการที่เป็นหนึ่งเดียวกันมากขึ้นในผลิตภัณฑ์ต่างๆ


### <a name="time-source-entity"></a>เอนทิตีต้นทางเวลา
| เขตข้อมูล | รายละเอียด | 
|-------|------------|
| ชื่อ  | ชื่อของรายการต้นทางเวลาที่ใช้เป็นค่าที่เลือกระหว่างการสร้างรายการเวลา |
| ต้นทางเวลาเริ่มต้น [ต้นทาง: isdefault] | ตามค่าเริ่มต้น ต้นทางเวลาเดียวเท่านั้นที่สามารถทำเครื่องหมายต้นทางเวลาเริ่มต้น ความสามารถนี้ช่วยให้รายการเป็นค่าเริ่มต้นเป็นต้นทางเวลาหากไม่ได้ระบุไว้ |
|ชนิดต้นทางเวลา [ต้นทางเวลา: sourcetype] | ชนิดต้นทางเป็นตัวเลือก (ชนิดต้นทางรายการเวลา) ที่อนุญาตให้มีการเชื่อมโยงต้นทางเวลากับแอป ค่าเพิ่มเติมจะถูกเพิ่มในชุดตัวเลือกนี้เมื่อมีการเพิ่มแอปพลิเคชันเพิ่มเติม โปรดทราบว่า Microsoft สำรองค่ามากกว่า 190,000,000|


### <a name="time-entries-and-the-time-source-entity"></a>รายการเวลาและเอนทิตีต้นทางเวลา
รายการเวลาแต่ละรายการจะเชื่อมโยงกับเรกคอร์ดต้นทางเวลา เรกคอร์ดนี้กำหนดว่าแอปพลิเคชันใดควรประมวลผลรายการเวลาและประมวลผลอย่างไร

รายการเวลาเป็นหนึ่งช่วงเวลาที่ต่อเนื่องกันโดยมีจุดเริ่มต้น สิ้นสุด และระยะเวลาที่เชื่อมโยงกันอยู่

ตรรกะจะปรับปรุงเรกคอร์ดรายการเวลาโดยอัตโนมัติในสถานการณ์ต่อไปนี้:

- หากระบุสองในสามฟิลด์ต่อไปนี้ ฟิลด์ที่สามจะมีการคำนวณโดยอัตโนมัติ 

    - **msdyn_start**
    - **msdyn_end**
    - **msdyn_duration**

- ฟิลด์ **msdyn_start** และ **msdyn_end** เป็นแบบทราบโซนเวลา
- รายการเวลาที่สร้างด้วย **msdyn_date** และ **msdyn_duration** ที่ระบุเริ่มต้นในตอนเที่ยงคืนและ **msdyn_start** และ **msdyn_end** จะได้รับการปรับปรุงตามนั้น

#### <a name="time-entry-types"></a>ชนิดรายการเวลา

เรกคอร์ดรายการเวลามีชนิดที่เกี่ยวข้องซึ่งกำหนดลักษณะการทำงานในขั้นตอนการส่งสำหรับแอปพลิเคชันที่เกี่ยวข้อง

|ป้ายชื่อ | ค่า|
|-----|-----|
|อยู่ระหว่างพักกลางวัน   |192,355,000|
|การเดินทาง | 192,355,001|
|ล่วงเวลา   | 192,354,320|
|ทำงาน   | 192,350,000|
|การขาดงาน    | 192,350,001|
|การลาพักร้อน   | 192,350,002|



## <a name="customize-the-weekly-time-entry-control"></a><a name="customize"></a>ปรับแต่งการควบคุมรายการเวลารายสัปดาห์
นักพัฒนาสามารถเพิ่มฟิลด์และการค้นหาเพิ่มเติมให้กับเอนทิตีอื่น และใช้กฎธุรกิจที่กำหนดเองเพื่อสนับสนุนสถานการณ์ทางธุรกิจของตน

### <a name="add-custom-fields-with-lookups-to-other-entities"></a>เพิ่มฟิลด์แบบกำหนดเองที่มีการค้นหาไปยังเอนทิตีอื่น
มีสามขั้นตอนหลักในการเพิ่มฟิลด์แบบกำหนดเองไปยังกริดรายการเวลารายสัปดาห์

- เพิ่มฟิลด์แบบกำหนดเองลงในกล่องโต้ตอบการสร้างด่วน
- กำหนดค่ากริดเพื่อแสดงฟิลด์แบบกำหนดเอง
- เพิ่มฟิลด์แบบกำหนดเองไปยังโฟลว์งานแก้ไขแถวหรือโฟลว์งานแก้ไขเซลล์

คุณต้องแน่ใจว่าฟิลด์ใหม่มีการตรวจสอบที่จำเป็นในโฟลว์งานแก้ไขแถวหรือเซลล์ ในส่วนของขั้นตอนนี้ คุณต้องล็อกฟิลด์ ตามสถานะรายการเวลา

#### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a>เพิ่มฟิลด์แบบกำหนดเองลงในกล่องโต้ตอบการสร้างด่วน
คุณต้องเพิ่มฟิลด์แบบกำหนดเองในกล่องโต้ตอบ **สร้างด่วนรายการเวลา** จากนั้นผู้ใช้สามารถป้อนค่าเมื่อเพิ่มรายการเวลาโดยการเลือก **ใหม่**

#### <a name="configure-the-grid-to-show-the-custom-field"></a>กำหนดค่ากริดเพื่อแสดงฟิลด์แบบกำหนดเอง
มีสองวิธีในการเพิ่มฟิลด์แบบกำหนดเองไปยังตารางรายการเวลารายสัปดาห์:

  - ปรับแต่งมุมมองและเพิ่มฟิลด์ที่กำหนดเอง
  - สร้างรายการเวลาที่กำหนดเองเริ่มต้น 


**ปรับแต่งมุมมองและเพิ่มฟิลด์ที่กำหนดเอง**

คุณสามารถปรับแต่งมุมมอง **รายการเวลารายสัปดาห์ของฉัน** และเพิ่มฟิลด์แบบกำหนดเอง คุณสามารถเลือกตำแหน่งและขนาดของฟิลด์แบบกำหนดเองในกริดได้โดยการแก้ไขคุณสมบัติเหล่านั้นในมุมมอง

**สร้างรายการเวลาที่กำหนดเองเริ่มต้น** 

มุมมองนี้ควรมี **คำอธิบาย** และฟิลด์ **ข้อคิดเห็นภายนอก** เพิ่มเติมจากคอลัมน์ที่คุณต้องการให้มีในกริด 

1. เลือกตำแหน่ง ขนาด และค่าเริ่มต้นการจัดเรียงของกริดโดยการแก้ไขคุณสมบัติเหล่านั้นในมุมมอง 
2. กำหนดค่าตัวควบคุมแบบกำหนดเองสำหรับมุมมองนี้เพื่อให้เป็นตัวควบคุม **กริดรายการเวลา** 
3. เพิ่มตัวควบคุมนี้ลงในมุมมอง และเลือกสำหรับเว็บ โทรศัพท์ และแท็บเล็ต 
4. กำหนดค่าพารามิเตอร์สำหรับตารางรายการเวลารายสัปดาห์ ตั้งค่าฟิลด์ **วันที่เริ่มต้น** เป็น **msdyn_date** ตั้งค่าฟิลด์ **ระยะเวลา** เป็น **msdyn_duration** และตั้งค่าฟิลด์ **สถานะ** เป็น **msdyn_entrystatus** 
5. สำหรับมุมมองเริ่มต้น ฟิลด์ **รายการสถานะแบบอ่านอย่างเดียว** ถูกตั้งค่าเป็น **192350002,192350003,192350004** ฟิลด์ **โฟลว์งานแก้ไขแถว** ถูกตั้งค่าเป็น **msdyn_timeentryrowedit** และฟิลด์ **โฟลว์งานแก้ไขเซลล์** ถูกตั้งค่าเป็น **msdyn_timeentryedit** 
6. คุณสามารถกำหนดฟิลด์เหล่านี้เองเพื่อเพิ่มหรือเอาสถานะแบบอ่านอย่างเดียวออก หรือใช้ประสบการณ์ตามงาน (TBX) ที่แตกต่างออกไปสำหรับการแก้ไขแถวหรือเซลล์ ฟิลด์เหล่านี้ควรถูกผูกไว้กับค่าคงที่


> [!NOTE] 
> ทั้งสองตัวเลือกจะลบบางกรองสำเร็จรูปใน **โครงการ** และเอนทิตี **งานโครงการ** เพื่อให้สามารถมองเห็นมุมมองการค้นหาทั้งหมดสำหรับเอนทิตี แบบสำเร็จรูป จะมองเห็นได้เฉพาะมุมมองการค้นหาที่เกี่ยวข้องเท่านั้น
คุณต้องกำหนดโฟลว์งานที่เหมาะสมสำหรับฟิลด์แบบกำหนดเอง มีแนวโน้มสูงขึ้น ถ้าคุณเพิ่มฟิลด์ลงในกริด ฟิลด์นั้นควรไปที่โฟลว์งานแก้ไขแถวที่จะใช้สำหรับฟิลด์ที่ใช้กับทั้งแถวของรายการเวลา ถ้าฟิลด์แบบกำหนดเองมีค่าที่ไม่ซ้ำกันทุกวัน เช่นฟิลด์แบบกำหนดเองสำหรับ **เวลาสิ้นสุด** ควรไปในโฟลว์งานแก้ไขเซลล์

เมื่อต้องการเพิ่มฟิลด์แบบกำหนดเองให้กับโฟลว์งานให้ลากองค์ประกอบ **ฟิลด์** ลงในตำแหน่งที่เหมาะสมบนเพจ แล้วตั้งค่าคุณสมบัติฟิลด์ ตั้งค่าคุณสมบัติของ **แหล่งที่มา** เป็น **รายการเวลา** และตั้งค่าคุณสมบัติ **ฟิลด์ข้อมูล** ไปยังฟิลด์แบบกำหนดเอง คุณสมบัติ **ฟิลด์** ระบุชื่อที่แสดงบนเพจ tbx เลือก**นำไปใช้** เพื่อบันทึกการเปลี่ยนแปลงของคุณลงในฟิลด์ จากนั้นเลือก **ปรับปรุง** เพื่อบันทึกการเปลี่ยนแปลงของคุณลงในเพจ

หากต้องการใช้เพจ TBX แบบกำหนดเองใหม่แทน ให้สร้างกระบวนการใหม่ ตั้งค่าประเภทเป็น **โฟลว์กระบวนการธุรกิจ** ตั้งค่าเอนทิตีเป็น **รายการเวลา** และตั้งค่าชนิดกระบวนการทางธุรกิจเพื่อ **รันกระบวนการเป็นโฟลว์งาน** ภายใต้ **คุณสมบัติ** คุณสมบัติของ **ชื่อเพจ** ควรถูกตั้งค่าเป็นชื่อที่แสดงสำหรับเพจ เพิ่มฟิลด์ที่เกี่ยวข้องทั้งหมดลงในเพจ TBX บันทึกและเริ่มการใช้กระบวนการ และจากนั้นปรับปรุงคุณสมบัติตัวควบคุมแบบกำหนดเองสำหรับโฟลว์งานที่เกี่ยวข้องกับค่าของ **ชื่อ** ในกระบวนการ

### <a name="add-new-option-set-values"></a>เพิ่มค่าชุดตัวเลือกใหม่
ถ้าต้องการเพิ่มค่าชุดตัวเลือกลงในฟิลด์สำเร็จรูป ให้เปิดเพจการแก้ไขสำหรับฟิลด์ จากนั้นภายใต้ **ชนิด** ให้เลือก **แก้ไข** ถัดจากชุดตัวเลือก ถัดไป ให้เพิ่มตัวเลือกใหม่ที่มีป้ายชื่อและสีที่กำหนดเอง ถ้าคุณต้องการเพิ่มสถานะรายการเวลาใหม่ ฟิลด์สำเร็จรูปจะถูกตั้ง **ชื่อสถานะรายการ** ไม่ใช่ **สถานะ**

### <a name="designate-a-new-time-entry-status-as-read-only"></a>กำหนดสถานะรายการเวลาใหม่เป็นแบบอ่านอย่างเดียว
เมื่อต้องการกำหนดสถานะรายการเวลาใหม่เป็นแบบอ่านอย่างเดียว ให้เพิ่มค่ารายการเวลาใหม่ไปยังคุณสมบัติ **รายการสถานะแบบอ่านอย่างเดียว** ส่วนที่แก้ไขได้ของกริดรายการเวลาจะถูกล็อคสำหรับแถวที่มีสถานะใหม่
ถัดไป เพิ่มกฎทางธุรกิจเพื่อล็อกฟิลด์ทั้งหมดใน **แถวแก้ไขรายการเวลา** และ **แก้ไขรายการเวลา** เพจ TBX คุณสามารถเข้าถึงกฎทางธุรกิจสำหรับเพจเหล่านี้ได้โดยเปิดตัวแก้ไขโฟลว์กระบวนการธุรกิจสำหรับเพจแล้วเลือก **กฎทางธุรกิจ** คุณสามารถเพิ่มสถานะใหม่ให้กับเงื่อนไขในกฎทางธุรกิจที่มีอยู่ หรือคุณสามารถเพิ่มกฎทางธุรกิจใหม่สำหรับสถานะใหม่

### <a name="add-custom-validation-rules"></a>เพิ่มกฎการตรวจสอบความถูกต้องแบบกำหนดเอง
มีกฎการตรวจสอบความถูกต้องสองชนิดที่คุณสามารถเพิ่มสำหรับประสบการณ์การใช้ตารางรายการเวลารายสัปดาห์:

- กฎธุรกิจฝั่งไคลเอ็นต์ที่ทำงานในกล่องโต้ตอบสร้างด่วนและบนเพจ TBX
- การตรวจสอบความถูกต้องของปลั๊กอินฝั่งเซิร์ฟเวอร์ที่ใช้กับการปรับปรุงรายการเวลาทั้งหมด

#### <a name="business-rules"></a>กฎทางธุรกิจ
ใช้กฎทางธุรกิจเพื่อล็อคและปลดล็อกฟิลด์ ป้อนค่าเริ่มต้นในฟิลด์ และกำหนดการตรวจสอบที่จำเป็นต้องมีข้อมูลจากเรกคอร์ดการป้อนเวลาปัจจุบันเท่านั้น คุณสามารถเข้าถึงกฎทางธุรกิจสำหรับเพจ TBX ได้โดยเปิดตัวแก้ไขโฟลว์กระบวนการธุรกิจสำหรับเพจแล้วเลือก **กฎทางธุรกิจ** จากนั้นคุณสามารถแก้ไขกฎทางธุรกิจที่มีอยู่หรือเพิ่มกฎทางธุรกิจใหม่ สำหรับการตรวจสอบความถูกต้องแบบกำหนดเองที่มากขึ้น คุณสามารถใช้กฎทางธุรกิจเพื่อเรียกใช้ JavaScript

#### <a name="plug-in-validations"></a>การตรวจสอบความถูกต้องของปลั๊กอิน
คุณควรใช้การตรวจสอบปลั๊กอินสำหรับการตรวจสอบใดๆที่จำเป็นต้องมีบริบทมากกว่าแบบพร้อมใช้งานในเรกคอร์ดรายการเวลาเดียว หรือสำหรับการตรวจสอบใดๆที่คุณต้องการเรียกใช้บนการปรับปรุงแบบอินไลน์ในกริด เมื่อต้องการทำการตรวจสอบให้เสร็จสมบูรณ์ ให้สร้างปลั๊กอินแบบกำหนดเองบนเอนทิตี **รายการเวลา**
