---
title: ตั้งค่าการสร้างใบแจ้งหนี้อัตโนมัติ
description: หัวข้อนี้ให้ข้อมูลเกี่ยวกับการตั้งค่าและกำหนดค่าการสร้างใบแจ้งหนี้ชั่วคราวอัตโนมัติ
author: rumant
manager: Annbe
ms.date: 04/05/2021
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 359c5902e0b6a08ab7fc982095062e4d1816db6c
ms.sourcegitcommit: ca0fc078d1a12484eca193fe051b8442c0559db8
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 04/07/2021
ms.locfileid: "5866840"
---
# <a name="set-up-automatic-invoice-creation"></a>ตั้งค่าการสร้างใบแจ้งหนี้อัตโนมัติ 
 
_**นำไปใช้กับ:** การปรับใช้งานแบบ Lite - จัดการกับการออกใบแจ้งหนี้ชั่วคราว, Project Operations สำหรับสถานการณ์ตามทรัพยากร/สินค้าที่ไม่ได้เก็บในคลัง_

คุณสามารถกำหนดค่าการสร้างใบแจ้งหนี้อัตโนมัติใน Dynamics 365 Project Operations ระบบจะสร้างใบแจ้งหนี้ Proforma แบบร่างตามกำหนดการใบแจ้งหนี้สำหรับสัญญาโครงการและรายละเอียดการให้บริการตามสัญญา กำหนดการใบแจ้งหนี้ได้รับการกำหนดค่าที่ระดับรายละเอียดการให้บริการตามสัญญา แต่ละบรรทัดในสัญญาอาจมีกำหนดการใบแจ้งหนี้ที่แตกต่างกัน หรืออาจรวมกำหนดการใบแจ้งหนี้เดียวกันไว้ในทุกบรรทัดของสัญญาก็ได้

เมื่อคุณสร้างใบแจ้งหนี้ ระบบจะสร้างใบแจ้งหนี้อย่างน้อยหนึ่งใบต่อสัญญาโครงการเสมอ ในบางกรณี อาจมีการสร้างใบแจ้งหนี้หลายใบ ตัวอย่างเช่น หากสัญญามีลูกค้าหลายราย จำนวนใบแจ้งหนี้เดียวกันจะถูกสร้างขึ้นตามจำนวนลูกค้าที่มีธุรกรรมที่เรียกเก็บเงินได้เพื่อออกใบแจ้งหนี้ในสัญญาโครงการนั้น

## <a name="understand-how-transactions-are-included-on-an-invoice"></a>ทำความเข้าใจว่าธุรกรรมรวมอยู่ในใบแจ้งหนี้อย่างไร 

บางครั้งรายละเอียดการให้บริการตามสัญญาตามโครงการแต่ละรายการจะระบุกำหนดการใบแจ้งหนี้แยกกัน ตัวอย่างเช่น บริการการใช้งานสำหรับสัญญา Adatum มีรายละเอียดการให้บริการตามสัญญาต่อไปนี้:

- งานต้นแบบที่เป็นราคาคงที่โดยมีหลักเป้าหมายที่สร้างขึ้นด้วยตนเองสองรายการ
- งานการใช้งานซึ่งรวมเวลาและจะถูกเรียกเก็บเงินทุกสองสัปดาห์ในวันจันทร์
- ค่าใช้จ่ายที่เกิดขึ้นซึ่งต้องเรียกเก็บเป็นรายเดือนในวันจันทร์แรกของแต่ละเดือน

กำหนดการใบแจ้งหนี้ที่กำหนดไว้สำหรับรายการทั้งสองรายการนี้มีลักษณะดังตารางต่อไปนี้:

| รายละเอียดการให้บริการตามสัญญา | วันที่เรียกใช้ใบแจ้งหนี้ | วันที่ตัดยอดธุรกรรม | วันที่ของหลักเป้าหมาย | จำนวนเงินของหลักเป้าหมาย |
| --- | --- | --- | --- | --- |
| งานต้นแบบ | วันจันทร์ที่ 5 ตุลาคม | - | วันจันทร์ที่ 5 ตุลาคม | 5000 USD |
| - | วันอังคารที่ 3 พฤศจิกายน | - | วันอังคารที่ 3 พฤศจิกายน | 12,000 USD |
| งานการใช้งาน | วันจันทร์ที่ 5 ตุลาคม | วันอาทิตย์ที่ 4 ตุลาคม | - | - |
| - | วันจันทร์ที่ 19 ตุลาคม | วันอาทิตย์ที่ 18 ตุลาคม | - | - |
| - | วันจันทร์ที่ 2 พฤศจิกายน | วันอาทิตย์ที่ 1 พฤศจิกายน | - | - |
| - | วันจันทร์ที่ 16 พฤศจิกายน | วันอาทิตย์ที่ 15 พฤศจิกายน | - | - |
| ค่าใช้จ่ายที่เกิดขึ้น | วันจันทร์ที่ 5 ตุลาคม | วันอาทิตย์ที่ 4 ตุลาคม | - | - |
| - | วันจันทร์ที่ 2 พฤศจิกายน | วันอาทิตย์ที่ 1 พฤศจิกายน | - | - |

ในตัวอย่างนี้เมื่อการออกใบแจ้งหนี้อัตโนมัติทำงานบน:

- **4 ตุลาคมหรือก่อนหน้าวันใดก็ได้**: ไม่มีการสร้างใบแจ้งหนี้สำหรับสัญญานี้เนื่องจากตาราง **กำหนดการใบแจ้งหนี้** สำหรับแต่ละบรรทัดสัญญาเหล่านี้ไม่เรียกวันอาทิตย์ที่ 4 ตุลาคมเป็นวันที่เรียกใช้ใบแจ้งหนี้
- **วันจันทร์ที่ 5 ตุลาคม**: ใบแจ้งหนี้หนึ่งใบถูกสร้างขึ้นสำหรับ:

    - งานต้นแบบที่มีหลักเป้าหมายหากมีการทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**
    - งานการใช้งานที่รวมธุรกรรมเวลาทั้งหมดที่สร้างขึ้นก่อนวันตัดธุรกรรมของวันอาทิตย์ที่ 4 ตุลาคม ซึ่งทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**
    - ค่าใช้จ่ายที่เกิดขึ้นที่รวมธุรกรรมค่าใช้จ่ายทั้งหมดที่สร้างขึ้นก่อนวันตัดธุรกรรมของวันอาทิตย์ที่ 4 ตุลาคม ซึ่งทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**
  
- **6 ตุลาคมหรือก่อนหน้าวันที่ 19 ตุลาคม**: ไม่มีการสร้างใบแจ้งหนี้สำหรับสัญญานี้เนื่องจากตาราง **กำหนดการใบแจ้งหนี้** สำหรับแต่ละบรรทัดสัญญาเหล่านี้ไม่เรียกวันที่ 6 ตุลาคมหรือวันใดๆก่อนหน้า 19 ตุลาคมเป็นวันที่เรียกใช้ใบแจ้งหนี้
- **วันจันทร์ที่ 19 ตุลาคม**: ใบแจ้งหนี้หนึ่งใบถูกสร้างขึ้นสำหรับงานการใช้งานที่รวมธุรกรรมเวลาทั้งหมดที่สร้างขึ้นก่อนวันตัดธุรกรรมของวันอาทิตย์ที่ 18 ตุลาคม ซึ่งทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**
- **วันจันทร์ที่ 2 พฤศจิกายน**: ใบแจ้งหนี้หนึ่งใบถูกสร้างขึ้นสำหรับ:

    - งานการใช้งานที่รวมธุรกรรมเวลาทั้งหมดที่สร้างขึ้นก่อนวันตัดธุรกรรมของวันอาทิตย์ที่ 1 พฤศจิกายน ซึ่งทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**
    - ค่าใช้จ่ายที่เกิดขึ้นที่รวมธุรกรรมค่าใช้จ่ายทั้งหมดที่สร้างขึ้นก่อนวันตัดธุรกรรมของวันอาทิตย์ที่ 1 พฤศจิกายน ซึ่งทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**

- **วันอังคารที่ 3 พฤศจิกายน**: ใบแจ้งหนี้หนึ่งใบถูกสร้างขึ้นสำหรับงานต้นแบบที่มีหลักเป้าหมายสำหรับ 12000 USD หากถูกทำเครื่องหมายเป็น **พร้อมที่จะออกใบแจ้งหนี้**

## <a name="configure-automatic-invoicing"></a>กำหนดค่าการออกใบแจ้งหนี้อัตโนมัติ

ทำตามขั้นตอนเหล่านี้เพื่อกำหนดค่าการเรียกใช้ใบแจ้งหนี้อัตโนมัติ

1. ใน **Project Operations** ไปที่ **การตั้งค่า** > **การตั้งค่าใบแจ้งหนี้ที่เกิดซ้ำ**
2. สร้างชุดงาน และตั้งชื่อว่า **Project Operations สร้างใบแจ้งหนี้** ชื่อของชุดงานต้องมีคำว่า "สร้างใบแจ้งหนี้"
3. ในฟิลด์ **ชนิดงาน** ให้เลือก **ไม่มี** โดยค่าเริ่มต้น ฟิลด์ **ความถี่รายวัน** และ **เปิดใช้งาน** จะถูกตั้งค่าเป็น **ใช่**
4. เลือก **เรียกใช้เวิร์กโฟลว์** ในกล่องโต้ตอบ **การค้นหาเรกคอร์ด** คุณจะเห็นสามเวิร์กโฟลว์

- ProcessRunCaller
- ProcessRunner
- UpdateRoleUtilization

5. เลือก **ProcessRunCaller** จากนั้นเลือก **เพิ่ม**
6. ในกล่องโต้ตอบถัดไป ให้เลือก **ตกลง** เวิร์กโฟลว์ **การพักเครื่อง** ตามด้วยเวิร์กโฟลว์ **กระบวนการ** 

> [!NOTE]
> นอกจากนี้คุณยังสามารถเลือก **ProcessRunner** ในขั้นตอนที่5 จากนั้น เมื่อคุณเลือก **ตกลง** เวิร์กโฟลว์ **กระบวนการ** ตามด้วยเวิร์กโฟลว์ **การพักเครื่อง**

เวิร์กโฟลว์ **ProcessRunCaller** และ **ProcessRunner** สร้างใบแจ้งหนี้ **ProcessRunCaller** เรียกใช้ **ProcessRunner** **ProcessRunner** เป็นเวิร์กโฟลว์ที่สร้างใบแจ้งหนี้อย่างแท้จริง เวิร์กโฟลว์รวมถึงรายละเอียดการให้บริการตามสัญญาทั้งหมดที่ต้องสร้างใบแจ้งหนี้ และจะมีการสร้างใบแจ้งหนี้สำหรับรายละเอียดเหล่านั้น ในการกำหนดรายละเอียดการให้บริการตามสัญญาที่ต้องสร้างใบแจ้งหนี้ งานจะดูที่วันที่เรียกใช้ใบแจ้งหนี้สำหรับรายละเอียดการให้บริการตามสัญญา ถ้ารายละเอียดการให้บริการตามสัญญาที่เป็นของสัญญาเดียวมีวันที่เรียกใช้ใบแจ้งหนี้เดียวกัน ธุรกรรมจะรวมอยู่ในใบแจ้งหนี้เดียวที่มีรายการใบแจ้งหนี้สองรายการ ถ้าไม่มีธุรกรรมที่จะสร้างใบแจ้งหนี้ งานจะข้ามการสร้างใบแจ้งหนี้

หลังจาก **ProcessRunner** เสร็จสิ้น จะเรียก **ProcessRunCaller** ให้เวลาสิ้นสุด และถูกปิด **ProcessRunCaller** เริ่มต้นการจับเวลาที่ทำงานเป็นเวลา 24 ชั่วโมง ตั้งแต่เวลาสิ้นสุดที่ระบุ ในตอนท้ายของการจับเวลา **ProcessRunCaller** ถูกปิด

งานกระบวนการชุดงานสำหรับการสร้างใบแจ้งหนี้เป็นงานที่เกิดขึ้นเป็นประจำ ถ้ามีการเรียกใช้กระบวนการชุดงานนี้หลายครั้ง จะมีการสร้างหลายอินสแตนซ์ของงาน และทำให้เกิดข้อผิดพลาด ดังนั้นคุณควรเริ่มต้นกระบวนการชุดงานเพียงครั้งเดียว และเริ่มต้นใหม่เฉพาะเมื่อหยุดทำงาน

> [!NOTE]
> การออกใบแจ้งหนี้ชุดงานใน Project Operations ทำงานเฉพาะสำหรับรายละเอียดการให้บริการตามสัญญาของโครงการที่กำหนดค่าโดยกำหนดการใบแจ้งหนี้ รายละเอียดการให้บริการตามสัญญาที่มีวิธีการเรียกเก็บเงินแบบราคาคงที่ ต้องมีการกำหนดค่าหลักเป้าหมาย รายละเอียดการให้บริการตามสัญญาโครงการที่มีวิธีการเรียกเก็บเงินตามเวลาและวัสดุจะต้องมีการตั้งค่ากำหนดการใบแจ้งหนี้ตามวันที่


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
