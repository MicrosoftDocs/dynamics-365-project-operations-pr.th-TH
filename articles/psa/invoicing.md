---
title: การออกใบแจ้งหนี้ใน Project Service Automation
description: หัวข้อนี้แสดงข้อมูลเกี่ยวกับการออกใบแจ้งหนี้
author: rumant
manager: kfend
ms.custom:
- dyn365-projectservice
ms.date: 08/03/2020
ms.topic: article
ms.service: business-applications
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.openlocfilehash: 0855e85c1f09d29d3ecb49ba517fd3043ae11140
ms.sourcegitcommit: 418fa1fe9d605b8faccc2d5dee1b04b4e753f194
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 02/10/2021
ms.locfileid: "5151411"
---
# <a name="invoicing-in-project-service-automation"></a>การออกใบแจ้งหนี้ใน Project Service Automation

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

การออกใบแจ้งหนี้ใน Dynamics 365 Project Service Automation จะมีประโยชน์ เนื่องจากจะช่วยให้ผู้จัดการโครงการได้รับระดับการอนุมัติที่สอง ก่อนที่จะสร้างใบแจ้งหนี้สำหรับลูกค้า ระดับแรกของการอนุมัติจะเสร็จสมบูรณ์ เมื่อรายการเวลาและค่าใช้จ่ายที่สมาชิกทีมงานส่งได้รับการอนุมัติ

PSA ไม่ได้ออกแบบมาเพื่อสร้างใบแจ้งหนี้ที่มีการเชื่อมต่อกับลูกค้าด้วยเหตุผลดังนี้:

- ไม่มีข้อมูลภาษี
- ไม่สามารถแปลงสกุลเงินอื่นเป็นสกุลเงินสำหรับออกใบแจ้งหนี้ โดยใช้อัตราแลกเปลี่ยนที่กำหนดไว้อย่างถูกต้อง
- ไม่สามารถจัดรูปแบบใบแจ้งหนี้ได้อย่างถูกต้อง เพื่อให้สามารถพิมพ์ได้

คุณสามารถใช้ระบบทางการเงินหรือบัญชี เพื่อสร้างใบแจ้งหนี้ที่เชื่อมต่อกับลูกค้าที่ใช้ข้อมูลจากข้อเสนอใบแจ้งหนี้ที่สร้างขึ้นใน PSA ได้แทน

## <a name="creating-project-invoices-in-psa"></a>การสร้างใบแจ้งหนี้ของโครงการใน PSA

คุณสามารถสร้างใบแจ้งหนี้โครงการได้ครั้งละหนึ่งรายการหรือจำนวนมาก คุณสามารถสร้างได้ด้วยตนเอง หรือสามารถตั้งค่า เพื่อสร้างในการเรียกใช้อัตโนมัติ

### <a name="manually-create-project-invoices-in-psa"></a>สร้างใบแจ้งหนี้ของโครงการใน PSA ด้วยตนเอง

จากหน้ารายการ **สัญญาของโครงการ** คุณสามารถสร้างใบแจ้งหนี้โครงการแยกต่างหากสำหรับแต่ละสัญญาโครงการ หรือคุณสามารถสร้างใบแจ้งหนี้จำนวนมากสำหรับสัญญาโครงการหลายรายการ

ทำตามขั้นตอนนี้เพื่อสร้างใบแจ้งหนี้สำหรับสัญญาของโครงการเฉพาะ

- ในหน้ารายการ **สัญญาของโครงการ** ให้เปิดสัญญาของโครงการ แล้วเลือก **สร้างใบแจ้งหนี้**

    ![การสร้างใบแจ้งหนี้โครงการสำหรับสัญญาของโครงการฉพาะ](media/CreateProjectInvoicesOneByOne.png)

    ใบแจ้งหนี้จะถูกสร้างขึ้นสำหรับธุรกรรมทั้งหมดสำหรับสัญญาของโครงการที่เลือกซึ่งมีสถานะเป็น **พร้อมที่จะออกใบแจ้งหนี้** ธุรกรรมเหล่านี้รวมถึงเวลา ค่าใช้จ่าย เหตุการณ์สำคัญ และของรายละเอียดการให้บริการตามสัญญาตามผลิตภัณฑ์

ทำตามขั้นตอนเหล่านี้เพื่อสร้างใบแจ้งหนี้จำนวนมาก

1. ในหน้ารายการ **สัญญาของโครงการ** เลือกอย่างน้อยหนึ่งสัญญาของโครงการที่คุณต้องสร้างใบแจ้งหนี้ และจากนั้นเลือก **สร้างใบแจ้งหนี้โครงการ**

    ![การสร้างใบแจ้งหนี้ของโครงการจำนวนมาก](media/CreateProjectInvoicesBulk.png)

    ข้อความเตือนจะแจ้งให้คุณทราบว่าอาจมีความล่าช้าก่อนที่ใบแจ้งหนี้จะถูกสร้าง นอกจากนี้ยังมีการแสดงกระบวนการ

2. เลือก **ตกลง** เพื่อปิดกล่องข้อความ

    ใบแจ้งหนี้จะถูกสร้างขึ้นสำหรับธุรกรรมทั้งหมดของรายละเอียดการให้บริการตามสัญญาซึ่งมีสถานะเป็น **พร้อมที่จะออกใบแจ้งหนี้** ธุรกรรมเหล่านี้รวมถึงเวลา ค่าใช้จ่าย เหตุการณ์สำคัญ และของรายละเอียดการให้บริการตามสัญญาตามผลิตภัณฑ์

3. ถ้าต้องการดูใบแจ้งหนี้ที่สร้างขึ้น ให้ไปที่ **การขาย** \> **การเรียกเก็บเงิน** \> **ใบแจ้งหนี้** คุณจะเห็นใบแจ้งหนี้หนึ่งฉบับสำหรับแต่ละสัญญาของโครงการ

### <a name="set-up-automated-creation-of-project-invoices-in-psa"></a>ตั้งค่าการสร้างใบแจ้งหนี้โครงการโดยอัตโนมัติใน PSA

ทำตามขั้นตอนเหล่านี้เพื่อตั้งค่าการเรียกใช้ใบแจ้งหนี้อัตโนมัติใน PSA

1. ไปที่ **Project Service** \> **การตั้งค่า** \> **ชุดงาน**
2. สร้างชุดงาน และตั้งชื่อว่า **PSA สร้างใบแจ้งหนี้** ชื่อของชุดงานต้องมีคำว่า "สร้างใบแจ้งหนี้"
3. ในฟิลด์ **ชนิดงาน** ให้เลือก **ไม่มี** โดยค่าเริ่มต้น **ความถี่รายวัน** และตัวเลือก **เปิดใช้งาน** จะถูกตั้งค่าเป็น **ใช่**
4. เลือก **เรียกใช้เวิร์กโฟลว์** ในกล่องโต้ตอบ **การค้นหาเรกคอร์ด** คุณจะเห็นสามเวิร์กโฟลว์

    - ProcessRunCaller
    - ProcessRunner
    - UpdateRoleUtilization

5. เลือก **ProcessRunCaller** จากนั้นเลือก **เพิ่ม**
6. ในกล่องโต้ตอบถัดไป ให้เลือก **ตกลง** เวิร์กโฟลว์ **การพักเครื่อง** ตามด้วยเวิร์กโฟลว์ **กระบวนการ**

    นอกจากนี้คุณยังสามารถเลือก **ProcessRunner** ในขั้นตอนที่5 จากนั้น เมื่อคุณเลือก **ตกลง** เวิร์กโฟลว์ **กระบวนการ** ตามด้วยเวิร์กโฟลว์ **การพักเครื่อง**

เวิร์กโฟลว์ **ProcessRunCaller** และ **ProcessRunner** สร้างใบแจ้งหนี้ **ProcessRunCaller** เรียกใช้ **ProcessRunner** **ProcessRunner** เป็นเวิร์กโฟลว์ที่สร้างใบแจ้งหนี้อย่างแท้จริง รวมถึงรายละเอียดการให้บริการตามสัญญาทั้งหมดที่ต้องสร้างใบแจ้งหนี้ และจะมีการสร้างใบแจ้งหนี้สำหรับรายละเอียดเหล่านั้น ในการกำหนดรายละเอียดการให้บริการตามสัญญาที่ต้องสร้างใบแจ้งหนี้ งานจะดูที่วันที่เรียกใช้ใบแจ้งหนี้สำหรับรายละเอียดการให้บริการตามสัญญา ถ้ารายละเอียดการให้บริการตามสัญญาที่เป็นของสัญญาเดียวมีวันที่เรียกใช้ใบแจ้งหนี้เดียวกัน ธุรกรรมจะรวมอยู่ในใบแจ้งหนี้เดียวที่มีรายการใบแจ้งหนี้สองรายการ ถ้าไม่มีธุรกรรมที่จะสร้างใบแจ้งหนี้ งานจะข้ามการสร้างใบแจ้งหนี้

หลังจาก **ProcessRunner** เสร็จสิ้น จะเรียก **ProcessRunCaller** ให้เวลาสิ้นสุด และถูกปิด **ProcessRunCallerr** เริ่มต้นการจับเวลาที่ทำงานเป็นเวลา 24 ชั่วโมง ตั้งแต่เวลาสิ้นสุดที่ระบุ ในตอนท้ายของการจับเวลา **ProcessRunCaller** ถูกปิด

งานกระบวนการชุดงานสำหรับการสร้างใบแจ้งหนี้เป็นงานที่เกิดขึ้นเป็นประจำ ถ้ามีการเรียกใช้กระบวนการชุดงานนี้หลายครั้ง จะมีการสร้างหลายอินสแตนซ์ของงาน และทำให้เกิดข้อผิดพลาด ดังนั้น คุณควรเริ่มต้นกระบวนการชุดงานเพียงครั้งเดียว และคุณควรเริ่มต้นใหม่เฉพาะเมื่อหยุดทำงาน

> [!NOTE]
> การออกใบแจ้งหนี้แบบกลุ่มใน Project Service Automation จะทำงานเฉพาะสำหรับรายละเอียดการให้บริการตามสัญญาโครงการที่กำหนดค่าโดยกำหนดการใบแจ้งหนี้ รายละเอียดการให้บริการตามสัญญาที่มีวิธีการเรียกเก็บเงินแบบราคาคงที่ ต้องมีการกำหนดค่าเหตุการณ์สำคัญ รายละเอียดการให้บริการตามสัญญาโครงการที่มีวิธีการเรียกเก็บเงินตามเวลาและวัสดุจะต้องมีการตั้งค่ากำหนดการใบแจ้งหนี้ตามวันที่ ข้อมูลเกี่ยวกับการตั้งค่าความถี่ในการออกใบแจ้งหนี้ในบริบทของโปรเจ็กต์ที่อิงตามบรรทัดใบเสนอราคามีให้ใน หัวข้อ [ใบเสนอราคาและรายการในใบเสนอราคา](basic-quote-lines.md#invoice-schedule). เช่นเดียวกับรายละเอียดการให้บริการตามสัญญาโครงการ      
 
### <a name="edit-a-draft-psa-invoice"></a>แก้ไขใบแจ้งหนี้ PSA แบบร่าง

เมื่อคุณสร้างใบแจ้งหนี้โครงการแบบร่าง ธุรกรรมการขายที่ยังไม่ได้เรียกเก็บเงินทั้งหมดที่ถูกสร้างขึ้นเมื่อมีการอนุมัติรายการเวลาและค่าใช้จ่ายบนใบแจ้งหนี้ คุณสามารถทำการปรับปรุงต่อไปนี้ในขณะที่ใบแจ้งหนี้ยังคงอยู่ในลำดับขั้นแบบร่าง

- ลบหรือแก้ไขรายละเอียดรายการใบแจ้งหนี้
- แก้ไขและปรับปรุงปริมาณและชนิดการเรียกเก็บเงิน
- เพิ่มเวลา ค่าใช้จ่าย และค่าธรรมเนียมโดยตรงเป็นธุรกรรมในใบแจ้งหนี้ คุณสามารถใช้ลักษณะการทำงานนี้ถ้ารายการใบแจ้งหนี้ถูกแม็ปกับรายละเอียดการให้บริการตามสัญญาที่อนุญาตสำหรับคลาสของธุรกรรมเหล่านี้

เลือก **ยืนยัน** เพื่อยืนยันใบแจ้งหนี้ การดำเนินการยืนยันเป็นการดำเนินการแบบทางเดียว เมื่อคุณเลือก **ยืนยัน** ระบบจะทำให้ใบแจ้งหนี้เป็นแบบอ่านอย่างเดียว และสร้างการขายที่เรียกเก็บเงินจริงจากรายละเอียดของรายการใบแจ้งหนี้แต่ละรายการสำหรับแต่ละรายการใบแจ้งหนี้ ถ้ารายละเอียดรายการใบแจ้งหนี้อ้างอิงถึงการขายจริงที่ยังไม่ได้เรียกเก็บเงิน ระบบจะย้อนกลับการขายจริงที่ยังไม่ได้เรียกเก็บเงิน (รายละเอียดบรรทัดใบแจ้งหนี้ใดๆ ที่สร้างขึ้นจากรายการเวลา หรือค่าใช้จ่ายจะอ้างอิงการขายจริงที่ยังไม่ได้เรียกเก็บเงิน) ระบบการรวมบัญชีแยกประเภททั่วไปสามารถใช้การกลับรายการนี้ เพื่อย้อนกลับรายการงานของโครงการที่อยู่ระหว่างดำเนินการ (WIP) เพื่อวัตถุประสงค์ทางบัญชี

### <a name="correct-a-confirmed-psa-invoice"></a>แก้ไขใบแจ้งหนี้ PSA ที่ยืนยันแล้ว

ใบแจ้งหนี้ PSA ที่ยืนยันแล้วสามารถแก้ไขได้ (แก้ไขแล้ว) เมื่อคุณแก้ไขใบแจ้งหนี้ที่ยืนยันแล้ว จะมีการสร้างใบแจ้งหนี้ที่มีการแก้ไขฉบับร่างใหม่ เนื่องจากสมมติฐานคือคุณต้องการย้อนกลับธุรกรรมและปริมาณทั้งหมดจากใบแจ้งหนี้ต้นฉบับ ใบแจ้งหนี้ที่แก้ไขนี้รวมธุรกรรมทั้งหมดจากใบแจ้งหนี้ต้นฉบับ และปริมาณทั้งหมดบนใบแจ้งหนี้เป็น 0 (ศูนย์)

ถ้าธุรกรรมใดๆ ไม่จำเป็นต้องแก้ไข คุณสามารถลบออกจากใบแจ้งหนี้ที่แก้ไขฉบับร่างได้ ถ้าคุณต้องการย้อนกลับหรือส่งคืนเฉพาะปริมาณบางส่วน คุณสามารถแก้ไขฟิลด์ **ปริมาณ** บนรายละเอียดรายการได้ ถ้าคุณเปิดรายละเอียดรายการใบแจ้งหนี้ คุณสามารถดูปริมาณต้นฉบับใบแจ้งหนี้ได้ จากนั้นคุณสามารถแก้ไขปริมาณในใบแจ้งหนี้ปัจจุบันได้ เพื่อให้น้อยกว่าหรือมากกว่าปริมาณในใบแจ้งหนี้ต้นฉบับ

เมื่อคุณยืนยันใบแจ้งหนี้ที่มีการแก้ไข การขายที่เรียกเก็บเงินจริงต้นฉบับจะย้อนกลับ และการขายที่เรียกเก็บเงินจริงใหม่จะถูกสร้างขึ้น ถ้าปริมาณถูกลดลง ความแตกต่างจะทำใหการขายจริงที่ยังไม่ได้เรียกเก็บเงินใหม่ที่ถูกสร้างด้วย ตัวอย่างเช่น ถ้าการขายที่เรียกเก็บเงินต้นฉบับเป็นเวลา 8 ชั่วโมง และรายละเอียดรายการใบแจ้งหนี้ที่มีการแก้ไขมีปริมาณที่ลดลง 6 ชั่วโมง PSA จะย้อนกลับบรรทัดการขายที่เรียกเก็บเงินต้นฉบับ และสร้างใหม่สองรายการ

- การขายที่มีการเรียกเก็บเงินจริงเป็นเวลาหกชั่วโมง
- การขายจริงที่ยังไม่ได้เรียกเก็บเงินป็นเวลาสองชั่วโมงที่เหลือ คุณสามารถเรียกเก็บเงินธุรกรรมนี้ในภายหลัง หรือทำเครื่องหมายว่าไม่สามารถคิดค่าธรรมเนียมได้ โดยขึ้นอยู่กับการเจรจากับลูกค้า


[!INCLUDE[footer-include](../includes/footer-banner.md)]