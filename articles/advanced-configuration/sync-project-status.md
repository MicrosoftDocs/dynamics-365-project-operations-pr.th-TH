---
title: ซิงค์สถานะโครงการเพื่อป้องกันการป้อนข้อมูลสำหรับโครงการที่ปิดแล้ว
description: บทความนี้อธิบายวิธีการซิงค์สถานะโครงการเพื่อป้องกันการป้อนข้อมูลสำหรับโครงการที่ไม่ใช้งานหรือปิดแล้ว
author: ryansandnessMSFT
ms.date: 08/09/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: ryansandnessMSFT
ms.openlocfilehash: 7a306da164235f36d9ed5e69196508dce6d257de
ms.sourcegitcommit: 6b6c2bfd04e3e613ed1f38355c7cd47c3a56748d
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/24/2022
ms.locfileid: "9348035"
---
# <a name="sync-project-status-to-prevent-entry-against-closed-projects"></a>ซิงค์สถานะโครงการเพื่อป้องกันการป้อนข้อมูลสำหรับโครงการที่ปิดแล้ว

_**นำไปใช้กับ:** Project Operations สำหรับสถานการณ์ตามทรัพยากร/ไม่ได้เก็บในคลัง_

## <a name="scenario"></a>สถานการณ์สมมติ

Contoso กำลังใช้งาน Microsoft Dynamics 365 Project Operations สำหรับสถานการณ์ทรัพยากร/ไม่ได้เก็บในคลัง โครงการอาจเสร็จสมบูรณ์หรือถูกระงับในลักษณะเป็นส่วนหนึ่งของกิจกรรมทางธุรกิจปกติ คุณสามารถปิดใช้งานโครงการเพื่อให้แน่ใจว่าไม่มีการสร้างค่าใช้จ่ายหรือใบแจ้งหนี้

## <a name="solution"></a>โซลูชัน

### <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

-   ต้องมีการติดตั้ง Microsoft Dynamics 365 Finance 10.0.29 หรือใหม่กว่า
-   แผนผังการรวมแบบสองทิศทาง 1.0.0.3 สำหรับโครงการ V2 (msdyn\_projects) ต้องติดตั้งหรือกำหนดค่าด้วยตนเองตามที่อธิบายไว้ด้านล่าง

### <a name="create-an-updated-version-of-the-project-operations-integration-projects-v2-dual-write-map"></a>สร้างเวอร์ชันที่อัปเดตของแผนผังการรวมแบบสองทิศทางของ Project Operations สำหรับโครงการ V2

ในการอัปเดตแผนผังการรวมแบบสองทิศทางของ Project Operations สำหรับโครงการ V2:

1. ไปที่พื้นที่ทำงาน **การจัดการข้อมูล** และเลือก **การรวมแบบสองทิศทาง**
2. เลือกไทล์ **การรวมแบบสองทิศทาง**
3. จากคอลัมน์ **แผนผังตาราง** ให้ค้นหาและเลือก **โครงการ V2 (msdyn\_projects)** แล้วเลือก หยุด
4. เลือกชื่อแผนผังเพื่อเปิดแผนผัง จากนั้นเลือก **[ไม่มี]**
5. จากกล่องโต้ตอบเลือกคอลัมน์ เลือก **statecode \[สถานะโครงการ\]** แล้วเลือก ตกลง คุณสามารถพิมพ์ **สถานะ** ในค่าตัวกรองเพื่อจำกัดรายการให้แคบลงได้
6.  เลือก **เพิ่มหรือแก้ไขการแปลง** ในคอลัมน์ **ชนิดแผนผัง** เพื่อแก้ไขการแปลง
7.  จาก **ชนิดการแปลง** ให้เลือก **ValueMap**
8.  เลือก **เพิ่มการแมปค่า** แล้วเพิ่ม **คีย์** และ **ค่า** ต่อไปนี้:

   Key       | ค่า 
   ----------|-------
   อยู่ระหว่างดำเนินการ | 12     
   เสร็จสมบูรณ์ | 1     

![ภาพหน้าจอแสดงการแมปสำหรับการรวมแบบสองทิศทาง](media/projectstage-dw-mapping.png)

9. เลือก **บันทึก**
10. จากด้านบนของหน้า **การรวมแบบสองทิศทาง > โครงการ V2 (msdyn_projects)** ให้เลือก **บันทึกเป็น**
11. จาก **เพิ่มตาราง** ในฟิลด์ **ผู้เผยแพร่** ให้เลือก **ผู้เผยแพร่เริ่มต้นสำหรับ CDS**
12. ตั้งค่าฟิลด์ **เวอร์ชัน** เป็น 1.0.0.3
13. พิมพ์ **คำอธิบาย** แล้วเลือก **บันทึก**
14. จากด้านบนของหน้า **การรวมแบบสองทิศทาง > โครงการ V2 (msdyn_projects)** ให้เลือก **เรียกใช้** เพื่อเริ่มแผนผัง แล้วเลือก **ใช่** หากถูกขอให้ยืนยันก่อนดำเนินการ 

### <a name="close-a-newly-completed-project"></a>ปิดโครงการที่เพิ่งสร้างเสร็จ

Dynamics 365 Finance ใช้ฟิลด์ **ลำดับขั้นของโครงการ** เพื่อแยกความแตกต่างระหว่างโครงการที่ **อยู่ระหว่างดำเนินงาน** หรือ **เสร็จสิ้นแล้ว** โครงการที่ **เสร็จสิ้นแล้ว** ไม่สามารถมีค่าใช้จ่ายหรือออกใบแจ้งหนี้ให้กับลูกค้าได้

1. เปิดโครงการเพื่อปิดการใช้งาน
2. เลือก **ปิดการใช้งาน** จาก Ribbon

> [!NOTE]
> คุณสามารถปิดการใช้งานหรือปิดโครงการได้ เนื่องจากทั้งคู่จะทำงานเหมือนกันในบริบทของ Finance

3. ใน Finance เปิดหน้า **รายการโครงการทั้งหมด**
4. ยืนยันว่าโครงการที่ปิดการใช้งานไม่ปรากฏในรายการ
5. ในตัวกรอง **แสดงโครงการ** ด้านบนรายการ เปลี่ยนค่าจาก **ใช้งานอยู่** เป็น **ทั้งหมด**
6. ตอนนี้คุณจะเห็นโครงการที่ปิดการใช้งาน

หากคุณพยายามบันทึกเวลาหรือค่าใช้จ่ายกับโครงการนี้ใน Finance คุณไม่ควรเห็นโครงการสำหรับการเลือก หากคุณป้อนหมายเลขโครงการด้วยตนเอง คุณจะเห็นข้อความว่า "ลำดับขั้นตอนของโครงการที่เสร็จสิ้นแล้วไม่อนุญาตให้บันทึกในโครงการ" ควรปิดใช้งานฟังก์ชันการออกใบแจ้งหนี้และการเรียกเก็บเงินอื่นๆ เนื่องจากจะอยู่ในบริบทของโครงการที่ปิดแล้ว

