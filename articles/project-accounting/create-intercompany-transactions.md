---
title: สร้างธุรกรรมระหว่างบริษัท
description: หัวข้อนี้ให้ข้อมูลเกี่ยวกับวิธีสร้างธุรกรรมระหว่างบริษัท
author: sigitac
ms.date: 04/12/2021
ms.topic: article
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: 0e396f0d08fd166e7acd6f8ec8f32353a7679dd8
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/10/2021
ms.locfileid: "6013374"
---
# <a name="create-intercompany-transactions"></a>สร้างธุรกรรมระหว่างบริษัท

_**นำไปใช้กับ:** Project Operations สำหรับสถานการณ์ตามทรัพยากร/วัสดุที่ไม่ได้เก็บในคลัง_

ธุรกรรมระหว่างบริษัท คือธุรกรรมเวลาและค่าใช้จ่ายจากสัญญาโครงการที่เป็นของหนึ่งบริษัทหรือหน่วยงาน ในขณะที่ทรัพยากรในสัญญาโครงการเป็นส่วนหนึ่งของ บริษัทหรือหน่วยงานอื่น

เมื่อธุรกรรมระหว่างบริษัทได้รับการอนุมัติ ธุรกรรมจริงดังต่อไปนี้จะถูกสร้างขึ้น

| **ชนิดธุรกรรม** | **รายการราคาที่นำมาใช้** | **สกุลเงินในธุรกรรม** |
| --- | --- | --- |
| ต้นทุน | รายการราคาต้นทุนต่อหน่วยที่ทำสัญญา | สกุลเงินในเส้นราคา |
| ยอดขายที่ยังไม่ได้เรียกเก็บเงิน สิ่งเหล่านี้สร้างขึ้นสำหรับข้อมูลจริงที่เกี่ยวข้องกับรายละเอียดการให้บริการตามสัญญาที่มีชนิดการเรียกเก็บเงิน เวลา และวัสดุเท่านั้น | รายการราคาสำหรับการขายของโครงการตามสัญญา | สกุลเงินตามสัญญา |
| ต้นทุนต่อหน่วยการจัดเตรียมทรัพยากร | รายการราคาต้นทุนต่อหน่วยการจัดเตรียมทรัพยากร | สกุลเงินในเส้นราคา |
| ต้นทุนต่อหน่วยระหว่างองค์กร | รายการราคาต้นทุนต่อหน่วยที่ทำสัญญา | สกุลเงินในเส้นราคา |

ต้นทุน ต้นทุนต่อหน่วยการจัดเตรียมทรัพยากร และราคาและสกุลเงินธุรกรรมต้นทุนต่อหน่วยระหว่างองค์กรขับเคลื่อนด้วย **หน่วยองค์กร** สิ่งนี้เป็นสิ่งสำคัญที่ต้องจำไว้เมื่อตัดสินใจว่าจะจัดโครงสร้างบริษัทและหน่วยองค์กรในการดำเนินการอย่างไร

เมื่อคุณสร้างโอกาสทางการขาย ใบเสนอราคา สัญญาโครงการ และเรกคอร์ดโครงการ ระบบจะตรวจสอบว่าสกุลเงินของหน่วยที่ทำสัญญาตรงกับสกุลเงินทางบัญชีของ บริษัทที่ทำสัญญา เมื่อไม่เหมือนกัน เรกคอร์ดเหล่านี้จึงไม่สามารถสร้างได้ สกุลเงินของหน่วยองค์กรถูกกำหนดใน Dynamics 365 Project Operations โดยไปที่ **Dataverse** > **การตั้งค่า** > **หน่วยงานขององค์กร** สกุลเงินทางบัญชีของบริษัทถูกกำหนดใน Dynamics 365 Finance โดยไปที่ **บัญชีแยกประเภททั่วไป** > **การตั้งค่าบัญชีแยกประเภท** > **บัญชีแยกประเภท** สกุลเงินจะซิงโครไนซ์กับสภาพแวดล้อม Dataverse โดยใช้ Ledgers Dual Write map

ระบบจะสร้างต้นทุนต่อหน่วยการจัดเตรียมทรัพยากรและการขายหน่วยระหว่างองค์กรที่เกิดขึ้นจริงในสถานการณ์ต่อไปนี้:

  - เมื่อหน่วยการจัดเตรียมทรัพยากรแตกต่างจากหน่วยที่ทำสัญญา
  - เมื่อบริษัทการจัดเตรียมทรัพยากรแตกต่างจากบริษัทตามสัญญา

อย่างไรก็ตาม เฉพาะธุรกรรมที่มีบริษัทการจัดเตรียมทรัพยากรที่แตกต่างจากบริษัทตามสัญญาเท่านั้นที่จะถูกโอนไปยังสภาพแวดล้อม Dynamics 365 Finance สำหรับการบัญชีเพิ่มเติม

การบัญชีสำหรับโครงการจริงจะถูกบันทึกในสมุดรายวันการรวม Project Operations ใน Finance ระบบจะสร้างบรรทัดสมุดรายวันต่อไปนี้

| **ชนิดธุรกรรม** | **นิติบุคคล** | **สร้างธุรกรรมโครงการในการลงรายการบัญชี** | **ค่าเริ่มต้นของมิติทางการเงินจาก** | **กลุ่มภาษีขายสำหรับการเรียกเก็บเงินเริ่มต้นและกลุ่มภาษีขายของรายการเรียกเก็บเงิน** |
| --- | --- | --- | --- | --- |
| ต้นทุน | ไม่ได้รับการเพิ่มลงในสมุดรายวันการรวม | N\A | N\A | N\A |
| การขายที่ยังไม่ได้เรียกเก็บเงิน | สมุดรายวันการรวมนิติบุคคลการกู้ยืม | มี | Project | **กลุ่มภาษีขายสำหรับการเรียกเก็บเงิน**: อ้างอิงจาก **ลูกค้าตามสัญญา** <br/> **กลุ่มภาษีขายของรายการเรียกเก็บเงิน**: จากประเภทโครงการของนิติบุคคลปัจจุบันในบรรทัดสมุดรายวัน |
| ต้นทุนต่อหน่วยการจัดเตรียมทรัพยากร | สมุดรายวันการรวมนิติบุคคลการให้กู้ยืม | ไม่ | ลูกค้าระหว่างบริษัท | **กลุ่มภาษีขายสำหรับการเรียกเก็บเงิน**: อ้างอิงจาก **ลูกค้าระหว่างบริษัท** <br/> **กลุ่มภาษีขายของรายการเรียกเก็บเงิน**: จากประเภทโครงการของนิติบุคคลปัจจุบันในบรรทัดสมุดรายวัน |
| การขายระหว่างองค์กร | สมุดรายวันการรวมนิติบุคคลการให้กู้ยืม | ไม่ | ลูกค้าระหว่างบริษัท | **กลุ่มภาษีขายสำหรับการเรียกเก็บเงิน**: อ้างอิงจาก **ลูกค้าระหว่างบริษัท** <br/> **กลุ่มภาษีขายของรายการเรียกเก็บเงิน**: จากประเภทโครงการของนิติบุคคลปัจจุบันในบรรทัดสมุดรายวัน |

### <a name="example-intercompany-transactions"></a>ตัวอย่าง: ธุรกรรมระหว่างบริษัท

Molly Clark นักพัฒนาที่ทำงานใน GBPM บันทึกการทำงาน 10 ชั่วโมงเทียบกับโครงการ USPM Adventure Works ซึ่งได้รับการอนุมัติจากผู้จัดการโครงการ ค่าใช้จ่ายของนักพัฒนาในหน่วย GBPM คือ 88 GBP ต่อชั่วโมง GBPM จะเรียกเก็บเงิน USPM 120 USD ต่อชั่วโมงของนักพัฒนาซอฟต์แวร์ USPM จะเรียกเก็บเงินจาก Adventure Works ของลูกค้า 200 USD สำหรับงานที่ทำโดยทรัพยากร GBPM สำหรับข้อมูลเพิ่มเติม ดู [ตั้งค่าคอนฟิกการออกใบแจ้งหนี้ระหว่างบริษัท](configure-intercompany-invoicing.md)

1. ใน Project Operations ไปที่ **ทรัพยากร** และเลือก **Molly Clark** จากรายการ ในแท็บ **การจัดกำหนดการ** ในฟิลด์ **บริษัท** เลือก **GBPM**
2. ไปที่ **ฝ่ายขาย** > **ลูกค้า** และเลือก **สร้าง** เพื่อสร้างเรกคอร์ดลูกค้าใหม่สำหรับ Adventure Works
    1. ตั้งค่าบริษัทเป็น **USPM**
    2. ตั้งค่า **ชนิดความสัมพันธ์** เป็น **ลูกค้า**
    3. เลือก **กลุ่มลูกค้า 10 - ในประเทศ**
    4. ตั้งค่าสกุลเงินเป็น **USD**
    5. บันทึกเรกคอร์ด
3. ไปที่ **ฝ่ายขาย** > **สัญญาโครงการ** และสร้างสัญญาโครงการใหม่สำหรับ Adventure Works
    1. ตั้งค่าบริษัทที่เป็นเจ้าของเป็น **USPM** และหน่วยงานที่ทำสัญญาเป็น **Contoso Robotics US**
    2. เลือก Adventure Works เป็นลูกค้า
    3. เลือกรายการราคาสินค้าและบันทึกเรกคอร์ด
    4. บนแท็บ **รายละเอียดการให้บริการตามสัญญา** สร้างรายละเอียดการให้บริการตามสัญญาใหม่ ตั้งชื่อใด ๆ แล้วเลือก **เวลาและวัสดุ** เป็นวิธีการเรียกเก็บเงิน
    5. สร้างโครงการใหม่และเชื่อมโยงกับรายละเอียดการให้บริการตามสัญญานี้
4. เข้าสู่ระบบเป็นทรัพยากร **Molly Clark** ไปที่ **โครงการ** > **รายการเวลา** และสร้างรายการเวลาสำหรับโครงการ Adventure Works
5. เข้าสู่ระบบในฐานะผู้จัดการโครงการ ไปที่ **โครงการ** > **การอนุมัติ** และอนุมัติธุรกรรมของรายการเวลาที่บันทึกโดย Molly Clark
6. ไปที่โครงการ Adventure Works แล้วเลือก **ที่เกี่ยวข้อง** > **ข้อมูลจริง** มีการสร้างธุรกรรมจริงดังต่อไปนี้

| **ชนิดธุรกรรม** | **ราคา** | **สกุลเงินในธุรกรรม** | **จำนวน** |
| --- | --- | --- | --- |
| ต้นทุน | 120 | USD | 1200 |
| การขายที่ยังไม่ได้เรียกเก็บเงิน | 200 | USD | 2000 |
| ต้นทุนต่อหน่วยการจัดเตรียมทรัพยากร | 88 | GBP | 880 |
| ต้นทุนต่อหน่วยระหว่างองค์กร | 120 | USD | 1200 |

7. เข้าสู่ระบบในฐานะนักบัญชี USPM เปิดอินสแตนซ์การเงินของ Project Operations และเลือกบริษัท **USPM** 
8. ไปที่ **การจัดการโครงการและการบัญชี** > **เป็นระยะ** > **Project Operations บน Customer Engagement** > **นำเข้าตั้งแต่การจัดเตรียม** และเลือกเพื่อเรียกใช้กระบวนการเป็นระยะ กระบวนการเป็นระยะนี้จะกรอกข้อมูลในสมุดรายวันการรวม Project Operations
9. ไปที่ **การจัดการโครงการและการบัญชี** > **สมุดรายวัน** > **สมุดรายวันเกี่ยวกับการรวม Project Operations** และตรวจสอบรายการสมุดรายวัน ระบบจะสร้างรายการต่อไปนี้

    | **ชนิดธุรกรรม** | **ราคา** | **สกุลเงินในธุรกรรม** | **จำนวน** |
    | --- | --- | --- | --- |
    | การขายที่ยังไม่ได้เรียกเก็บเงิน | 200 | USD | 2000 |

    หากระบบได้รับการตั้งค่าเพื่อรับรายได้สำหรับโครงการนี้ สิ่งต่อไปนี้จะถูกโพสต์:

    - เดบิต: โครงการ - มูลค่าการขาย WIP 200 USD
    - เครดิต: โครงการ - รายได้ค้างรับ 200 USD

    การขายที่ยังไม่เรียกเก็บเงินนี้พร้อมสำหรับการออกใบแจ้งหนี้แล้ว ใบแจ้งหนี้สำหรับ Adventure Works สำหรับลูกค้าสามารถลงรายการบัญชีทางการเงินได้เมื่อจำเป็น

10. เข้าสู่ระบบในฐานะนักบัญชี **GBPM** เปิดอินสแตนซ์การเงินของ Project Operations และเปิดบริษัท **GBPM** 
11. ไปที่ **การจัดการโครงการและการบัญชี** > **เป็นระยะ** > **การรวม Project Operations** > **นำเข้าจากตารางการจัดเตรียม** และรันกระบวนการเป็นระยะเพื่อกรอกข้อมูลในสมุดรายวันการรวม Project Operations
12. ไปที่ **การจัดการโครงการและการบัญชี** > **สมุดรายวัน** > **สมุดรายวันเกี่ยวกับการรวม Project Operations** และตรวจสอบรายการ ระบบจะสร้างรายการต่อไปนี้

    | **ชนิดธุรกรรม** | **ราคา** | **สกุลเงินในธุรกรรม** | **จำนวน** |
    | --- | --- | --- | --- |
    | ต้นทุนต่อหน่วยการจัดเตรียมทรัพยากร | 88 | GBP | 880 |
    | ต้นทุนต่อหน่วยระหว่างองค์กร | 120 | USD | 1200 |

    การลงรายการบัญชีเรกคอร์ดเหล่านี้ทำให้เกิดธุรกรรมใบสำคัญต่อไปนี้:

    - เดบิต: โครงการราคา 88 GBP
    - เครดิต: การจัดสรรเงินเดือน 88 GBP

    หากระบบได้รับการตั้งค่าเพื่อรับรายได้ระหว่างบริษัท สิ่งต่อไปนี้จะถูกโพสต์:

    - เดบิต: โครงการ - มูลค่าการขาย WIP 120 USD
    - เครดิต: โครงการ - รายได้ค้างรับ 120 USD

    ขณะนี้ระบบพร้อมที่จะสร้างใบแจ้งหนี้ของลูกค้าระหว่างบริษัท


[!INCLUDE[footer-include](../includes/footer-banner.md)]
